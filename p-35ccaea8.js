import{f as t,c as i,g as s}from"./p-606b130f.js";import{g as n}from"./p-0ae16e31.js";import{d as e}from"./p-58421494.js";import{h as r,H as a}from"./p-f8f51224.js";import{C as o}from"./p-39515aa9.js";function c(){this.setUpItems(),this.setUpFilter()}const h=["ArrowUp","ArrowDown"];function l(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=e(b.bind(this),0)}function f(){this.observer.observe(this.el,{childList:!0,subtree:!0})}function u(){this.observer.disconnect()}function d(e){const{selectedValues:t}=this,{item:s,value:i,selected:l,shiftPressed:a}=e.detail;l?(this.multiple||this.deselectSiblingItems(s),this.multiple&&a&&this.selectSiblings(s),t.set(i,s)):(t.delete(i),this.multiple&&a&&this.selectSiblings(s,!0)),this.multiple||g(s,l),this.lastSelectedItem=s,this.emitCalciteListChange()}function m(e){e.stopPropagation();const t=e.detail.oldValue,s=this.selectedValues;if(s.has(t)){const i=s.get(t);s.delete(t),s.set(e.detail.newValue,i)}}function p(e){const{key:s,target:i}=e;if(!function(e){return!!h.find((t=>t===e))}(s))return;const{items:l,multiple:a}=this,{length:r}=l,c=l.indexOf(i);if(!r||-1===c)return;e.preventDefault();const o=l[n(c+("ArrowUp"===s?-1:1),r)];g(o,!0),t(o),a||(o.selected=!0)}function b(){this.calciteListChange.emit(this.selectedValues)}function j(e){if(e.defaultPrevented)return;const t=e.target,s=this.selectedValues;"CALCITE-PICK-LIST-GROUP"===t.parentElement.tagName?(t.parentElement.remove(),Array.from(t.parentElement.children).forEach((e=>s.delete(e.value)))):(t.remove(),s.delete(t.value)),this.emitCalciteListChange()}function g(e,t){t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1")}async function v(e){if(this.filterEnabled&&"filter"===e)return void await t(this.filterEl);const{multiple:s,items:i}=this;return 0!==i.length?s?i[0].setFocus():(i.find((e=>e.selected))||i[0]).setFocus():void 0}function y(e){this.items=Array.from(this.el.querySelectorAll(e));let t=!1;const{items:s}=this;s.forEach((e=>{e.icon=this.getIconType(),this.multiple||(e.disableDeselect=!0,g(e,!1)),e.selected&&(t=!0,g(e,!0),this.selectedValues.set(e.value,e))}));const[i]=s;!t&&i&&g(i,!0)}function A(e){this.items.forEach((t=>{t.value!==e.value&&(t.toggleSelected(!1),this.selectedValues.has(t.value)&&this.selectedValues.delete(t.value))}))}function w(e,t=!1){if(!this.lastSelectedItem)return;const{items:s}=this,i=s.findIndex((e=>e.value===this.lastSelectedItem.value)),l=s.findIndex((t=>t.value===e.value));s.slice(Math.min(i,l),Math.max(i,l)).forEach((e=>{e.toggleSelected(!t),t?this.selectedValues.delete(e.value):this.selectedValues.set(e.value,e)}))}let C;function O(e){const t=e.detail.map((e=>e.value));let s=!1;C||(C=new Set);const l=this.items.filter((e=>{const i=e.parentElement;i.matches("calcite-pick-list-group")&&C.add(i);const l=t.includes(e.value);return e.hidden=!l,s||(s=l&&e.selected),l}));C.forEach((e=>{const t=l.some((t=>e.contains(t)));if(e.hidden=!t,!t)return;const s=i(e,"parent-item");s&&(s.hidden=!1,l.includes(s)&&Array.from(e.children).forEach((e=>e.hidden=!1)))})),C.clear(),l.length>0&&!s&&!this.multiple&&g(l[0],!0)}function F(){return this.items.map((e=>({label:e.label,description:e.description,metadata:e.metadata,value:e.value})))}const L=e=>{var{props:{disabled:t,loading:i,filterEnabled:l,dataForFilter:n,handleFilter:c,filterPlaceholder:d,el:u,setFilterEl:h,theme:f}}=e,m=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(s[i[l]]=e[i[l]])}return s}(e,["props"]);const p=r("slot",null);return r(a,Object.assign({"aria-busy":i.toString(),"aria-disabled":t.toString(),role:"menu"},m),r("section",null,r("header",{class:{[o.sticky]:!0}},l?r("calcite-filter",{"aria-label":d,data:n,dir:s(u),disabled:i||t,onCalciteFilterChange:c,placeholder:d,ref:h}):null,r("slot",{name:"menu-actions"})),i||t?r("calcite-scrim",{loading:i,theme:f}):null,p))};export{L,f as a,d as b,u as c,A as d,m as e,y as f,F as g,O as h,l as i,v as j,p as k,c as m,j as r,w as s};