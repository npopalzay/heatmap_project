(self.webpackChunkgeog863_final=self.webpackChunkgeog863_final||[]).push([[9059],{86348:(t,e,i)=>{"use strict";i.d(e,{Z:()=>it});const n=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],r=["آ","أ","إ","ا"],s=["ﻵ","ﻷ","ﻹ","ﻻ"],a=["ﻶ","ﻸ","ﻺ","ﻼ"],o=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],l=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],u=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],c=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],h=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],f=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],d=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],p=["ء","ف"],m=["غ","ي"],g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b=10,x=11,v=12,w=18,T=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],F=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],S=[[w,w,w,w,w,w,w,w,w,6,5,6,8,5,w,w,w,w,w,w,w,w,w,w,w,w,w,w,5,5,5,6,8,4,4,x,x,x,4,4,4,4,4,b,9,b,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,w,w,w,w,w,w,5,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,9,4,x,x,x,x,4,4,4,4,0,4,4,w,4,4,x,x,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,1,v,1,v,v,1,v,v,1,v,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,x,x,7,9,7,4,4,v,v,v,v,v,v,v,v,v,v,v,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,3,3,3,3,3,3,3,3,3,3,x,3,3,7,7,7,v,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,v,v,v,v,v,v,v,3,4,v,v,v,v,v,v,7,7,v,v,4,v,v,v,v,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,v,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,v,v,v,v,v,v,v,v,v,v,v,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,v,v,v,v,v,v,v,v,v,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,w,w,w,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,w,w,w,w,w,4,4,4,4,4,w,w,w,w,w,w,2,0,4,4,2,2,2,2,2,2,b,b,4,4,4,0,2,2,2,2,2,2,2,2,2,2,b,b,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,v,1,1,1,1,1,1,1,1,1,1,b,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,v,v,v,v,v,v,v,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,x,4,4,b,b,4,4,4,4,4,x,x,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,w],[4,4,4,x,x,x,4,4,4,4,4,b,9,b,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,x,x,4,4,4,x,x,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];function _(t,e,i,n,r){const s=function(t,e,i){if(void 0===e.inFormat&&(e.inFormat=i.defInFormat),void 0===e.outFormat&&(e.outFormat=i.defOutFormat),void 0===e.swap&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const n=e.inFormat.substring(0,1),r=e.outFormat.substring(0,1);let s,a=e.inFormat.substring(1,4),o=e.outFormat.substring(1,4);return"C"===a.charAt(0)&&(s=L(t),a="ltr"===s||"rtl"===s?s.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=n+a),"C"===o.charAt(0)&&(s=L(t),"rtl"===s?o="RTL":"ltr"===s?(s=function(t){const e=t.split("");return e.reverse(),L(e.join(""))}(t),o=s.toUpperCase()):o="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=r+o),e}(t,{inFormat:e,outFormat:i,swap:n},r);if(s.inFormat===s.outFormat)return t;e=s.inFormat,i=s.outFormat,n=s.swap;const a=e.substring(0,1),o=e.substring(1,4),l=i.substring(0,1),u=i.substring(1,4);if(r.inFormat=e,r.outFormat=i,r.swap=n,"L"===a&&"VLTR"===i){if("LTR"===o)return r.dir=K,M(t,r);if("RTL"===o)return r.dir=Q,M(t,r)}if("V"===a&&"V"===l)return r.dir="RTL"===o?Q:K,B(t,r);if("L"===a&&"VRTL"===i)return"LTR"===o?(r.dir=K,t=M(t,r)):(r.dir=Q,t=M(t,r)),B(t);if("VLTR"===e&&"LLTR"===i)return r.dir=K,M(t,r);if("V"===a&&"L"===l&&o!==u)return t=B(t),"RTL"===o?_(t,"LLTR","VLTR",n,r):_(t,"LRTL","VRTL",n,r);if("VRTL"===e&&"LRTL"===i)return _(t,"LRTL","VRTL",n,r);if("L"===a&&"L"===l){const e=r.swap;return r.swap=e.substr(0,1)+"N","RTL"===o?(r.dir=Q,t=M(t,r),r.swap="N"+e.substr(1,2),r.dir=K,t=M(t,r)):(r.dir=K,t=M(t,r),r.swap="N"+e.substr(1,2),t=_(t,"VLTR","LRTL",r.swap,r)),t}return t}function L(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function M(t,e){const i=t.split(""),n=[];return A(i,n,e),function(t,e,i){if(0!==i.hiLevel&&i.swap.substr(0,1)!==i.swap.substr(1,2))for(let i=0;i<t.length;i++)1===e[i]&&(t[i]=N(t[i]))}(i,n,e),U(2,i,n,e),U(1,i,n,e),G=n,i.join("")}function A(t,e,i){const n=t.length,r=i.dir?y:g;let s=0,a=-1;const o=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let e=0;e<n;e++)o[e]=R(t[e]);for(let u=0;u<n;u++){const n=s,c=I(t,o,l,u,i);l[u]=c,s=r[n][c];const h=240&s;s&=15;const f=r[s][q];if(e[u]=f,h>0)if(16===h){for(let t=a;t<u;t++)e[t]=1;a=-1}else a=-1;if(r[s][X])-1===a&&(a=u);else if(a>-1){for(let t=a;t<u;t++)e[t]=f;a=-1}5===o[u]&&(e[u]=0),i.hiLevel|=f}i.hasUbatS&&function(t,e,i,n){for(let r=0;r<i;r++)if(6===t[r]){e[r]=n.dir;for(let i=r-1;i>=0&&8===t[i];i--)e[i]=n.dir}}(o,e,n,i)}function R(t){const e=t.charCodeAt(0),i=F[e>>8];return i<100?i:S[i-100][255&e]}function B(t,e){const i=t.split("");if(e){const t=[];A(i,t,e),G=t}return i.reverse(),D.reverse(),i.join("")}function z(t,e,i){for(let n=0;n<e;n++)if(t[n]===i)return n;return-1}function E(t){for(let e=0;e<p.length;e++)if(t>=p[e]&&t<=m[e])return!0;return!1}function C(t,e,i,n){for(;e*i<n&&Z(t[e]);)e+=i;return!!(e*i<n&&E(t[e]))}function V(t,e,i,n){for(;e*i<n&&Z(t[e]);)e+=i;let s=" ";if(!(e*i<n))return!1;s=t[e];for(let t=0;t<r.length;t++)if(r[t]===s)return!0;return!1}function U(t,e,i,n){if(n.hiLevel<t)return;if(1===t&&n.dir===Q&&!n.hasUbatB)return e.reverse(),void D.reverse();const r=e.length;let s,a,o,l,u,c=0;for(;c<r;){if(i[c]>=t){for(s=c+1;s<r&&i[s]>=t;)s++;for(a=c,o=s-1;a<o;a++,o--)l=e[a],e[a]=e[o],e[o]=l,u=D[a],D[a]=D[o],D[o]=u;c=s}c++}}function I(t,e,i,n,r){const s=e[n];return{UBAT_L:()=>(r.lastArabic=!1,0),UBAT_R:()=>(r.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>r.lastArabic?3:2,UBAT_AL:()=>(r.lastArabic=!0,r.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{let t,s;return n<1||n+1>=e.length||2!==(t=i[n-1])&&3!==t||2!==(s=e[n+1])&&3!==s?4:(r.lastArabic&&(s=3),s===t?s:4)},UBAT_ES:()=>2===(n>0?i[n-1]:5)&&n+1<e.length&&2===e[n+1]?2:4,UBAT_ET:()=>{if(n>0&&2===i[n-1])return 2;if(r.lastArabic)return 4;let t=n+1;const s=e.length;for(;t<s&&e[t]===x;)t++;return t<s&&2===e[t]?2:4},UBAT_NSM:()=>{if("VLTR"===r.inFormat){const i=e.length;let r=n+1;for(;r<i&&e[r]===v;)r++;if(r<i){const i=t[n].charCodeAt[0],s=i>=1425&&i<=2303||64286===i,a=e[r];if(s&&(1===a||7===a))return 1}}return n<1||5===e[n-1]?4:i[n-1]},UBAT_B:()=>(r.lastArabic=!0,r.hasUbatB=!0,r.dir),UBAT_S:()=>(r.hasUbatS=!0,4),UBAT_LRE:()=>(r.lastArabic=!1,4),UBAT_RLE:()=>(r.lastArabic=!1,4),UBAT_LRO:()=>(r.lastArabic=!1,4),UBAT_RLO:()=>(r.lastArabic=!1,4),UBAT_PDF:()=>(r.lastArabic=!1,4),UBAT_BN:()=>4}[T[s]]()}function N(t){let e,i=0,r=n.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<n[e][0])r=e-1;else{if(!(t>n[e][0]))return n[e][1];i=e+1}return t}function O(t){for(let e=0;e<f.length;e++)if(f[e]===t)return!0;return!1}function k(t){for(let e=0;e<o.length;e++)if(t===o[e])return c[e];return t}function P(t,e){for(let i=0;i<o.length;i++)if(t===o[i])return e[i];return t}function Z(t){return t>="ً"&&t<="ٕ"}function W(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function j(t,e,i,n){for(;e*i<n&&Z(t[e]);)e+=i;return e*i<n&&(t[e]=" ",!0)}function J(t,e){for(let i=0;i<r.length;i++)if(t===r[i])return e[i];return t}function $(t,e,i,n){for(let r=0;r<t.length;r++)(t[r]>e||!i&&t[r]===e)&&(t[r]+=n)}let D=[],H=[],G=[];const Y={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},q=5,X=6,K=0,Q=1,tt=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,et=/[\u0591-\u06ff\ufb1d-\ufefc]/,it=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(t,e,i){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,i){D=[],G=[];for(let n=0;n<i;n++)t[n]=n,e[n]=n,D[n]=n}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,i))return t;e=this.inputFormat,i=this.outputFormat;let n=t;const o=Y,c=W(e.charAt(1)),f=W(i.charAt(1)),p=("I"===e.charAt(0)?"L":e.charAt(0))+c,m=("I"===i.charAt(0)?"L":i.charAt(0))+f,g=e.charAt(2)+i.charAt(2);o.defInFormat=p,o.defOutFormat=m,o.defSwap=g;const y=_(t,p,m,g,o);let b=!1;return"R"===i.charAt(1)?b=!0:"C"!==i.charAt(1)&&"D"!==i.charAt(1)||(b="rtl"===this.checkContextual(y)),this.sourceToTarget=D,this.targetToSource=function(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}(this.sourceToTarget),H=this.targetToSource,n=e.charAt(3)===i.charAt(3)?y:"S"===i.charAt(3)?function(t,e,i){if(0===e.length)return"";void 0===t&&(t=!0),void 0===i&&(i=!0);const n=(e=String(e)).split("");let r=0,o=1,c=n.length;t||(r=n.length-1,o=-1,c=1);const f=function(t,e,i,n,r){let o=0;const c=[];let f=0;for(let d=e;d*i<n;d+=i)if(E(t[d])||Z(t[d])){if("ل"===t[d]&&V(t,d+i,i,n)){t[d]=J(t[d+i],0===o?s:a),d+=i,j(t,d,i,n),r&&(c[f]=d,f++),o=0;continue}const e=t[d];1===o?t[d]=C(t,d+i,i,n)?k(t[d]):P(t[d],u):!0===C(t,d+i,i,n)?t[d]=P(t[d],h):t[d]=P(t[d],l),Z(e)||(o=1),!0===O(e)&&(o=0)}else o=0;return c}(n,r,o,c,i);let d="";for(let e=0;e<n.length;e++)i&&z(f,f.length,e)>-1?($(H,e,!t,-1),D.splice(e,1)):d+=n[e];return d}(b,y,!0):function(t,e,i){if(0===t.length)return"";void 0===i&&(i=!0),void 0===e&&(e=!0);let n="";const s=(t=String(t)).split("");for(let a=0;a<t.length;a++){let o=!1;if(s[a]>="ﹰ"&&s[a]<"\ufeff"){const l=t.charCodeAt(a);s[a]>="ﻵ"&&s[a]<="ﻼ"?(e?(a>0&&i&&" "===s[a-1]?n=n.substring(0,n.length-1)+"ل":(n+="ل",o=!0),n+=r[(l-65269)/2]):(n+=r[(l-65269)/2],n+="ل",a+1<t.length&&i&&" "===s[a+1]?a++:o=!0),o&&($(H,a,!0,1),D.splice(a,0,D[a]))):n+=d[l-65136]}else n+=s[a]}return n}(y,b,!0),this.sourceToTarget=D,this.targetToSource=H,this.levels=G,n}_inputFormatSetter(t){if(!tt.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}_outputFormatSetter(t){if(!tt.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}checkParameters(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}checkContextual(t){let e=L(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(t){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}hasBidiChar(t){return et.test(t)}}},14230:(t,e,i)=>{"use strict";i.d(e,{F:()=>h,M:()=>n});const n={Base64:0,Hex:1,String:2,Raw:3};function r(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function s(t,e,i,n,s,a){return r(function(t,e){return t<<e|t>>>32-e}(r(r(e,t),r(n,a)),s),i)}function a(t,e,i,n,r,a,o){return s(e&i|~e&n,t,e,r,a,o)}function o(t,e,i,n,r,a,o){return s(e&n|i&~n,t,e,r,a,o)}function l(t,e,i,n,r,a,o){return s(e^i^n,t,e,r,a,o)}function u(t,e,i,n,r,a,o){return s(i^(e|~n),t,e,r,a,o)}function c(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,n=-271733879,s=-1732584194,c=271733878;for(let e=0;e<t.length;e+=16){const h=i,f=n,d=s,p=c;i=a(i,n,s,c,t[e+0],7,-680876936),c=a(c,i,n,s,t[e+1],12,-389564586),s=a(s,c,i,n,t[e+2],17,606105819),n=a(n,s,c,i,t[e+3],22,-1044525330),i=a(i,n,s,c,t[e+4],7,-176418897),c=a(c,i,n,s,t[e+5],12,1200080426),s=a(s,c,i,n,t[e+6],17,-1473231341),n=a(n,s,c,i,t[e+7],22,-45705983),i=a(i,n,s,c,t[e+8],7,1770035416),c=a(c,i,n,s,t[e+9],12,-1958414417),s=a(s,c,i,n,t[e+10],17,-42063),n=a(n,s,c,i,t[e+11],22,-1990404162),i=a(i,n,s,c,t[e+12],7,1804603682),c=a(c,i,n,s,t[e+13],12,-40341101),s=a(s,c,i,n,t[e+14],17,-1502002290),n=a(n,s,c,i,t[e+15],22,1236535329),i=o(i,n,s,c,t[e+1],5,-165796510),c=o(c,i,n,s,t[e+6],9,-1069501632),s=o(s,c,i,n,t[e+11],14,643717713),n=o(n,s,c,i,t[e+0],20,-373897302),i=o(i,n,s,c,t[e+5],5,-701558691),c=o(c,i,n,s,t[e+10],9,38016083),s=o(s,c,i,n,t[e+15],14,-660478335),n=o(n,s,c,i,t[e+4],20,-405537848),i=o(i,n,s,c,t[e+9],5,568446438),c=o(c,i,n,s,t[e+14],9,-1019803690),s=o(s,c,i,n,t[e+3],14,-187363961),n=o(n,s,c,i,t[e+8],20,1163531501),i=o(i,n,s,c,t[e+13],5,-1444681467),c=o(c,i,n,s,t[e+2],9,-51403784),s=o(s,c,i,n,t[e+7],14,1735328473),n=o(n,s,c,i,t[e+12],20,-1926607734),i=l(i,n,s,c,t[e+5],4,-378558),c=l(c,i,n,s,t[e+8],11,-2022574463),s=l(s,c,i,n,t[e+11],16,1839030562),n=l(n,s,c,i,t[e+14],23,-35309556),i=l(i,n,s,c,t[e+1],4,-1530992060),c=l(c,i,n,s,t[e+4],11,1272893353),s=l(s,c,i,n,t[e+7],16,-155497632),n=l(n,s,c,i,t[e+10],23,-1094730640),i=l(i,n,s,c,t[e+13],4,681279174),c=l(c,i,n,s,t[e+0],11,-358537222),s=l(s,c,i,n,t[e+3],16,-722521979),n=l(n,s,c,i,t[e+6],23,76029189),i=l(i,n,s,c,t[e+9],4,-640364487),c=l(c,i,n,s,t[e+12],11,-421815835),s=l(s,c,i,n,t[e+15],16,530742520),n=l(n,s,c,i,t[e+2],23,-995338651),i=u(i,n,s,c,t[e+0],6,-198630844),c=u(c,i,n,s,t[e+7],10,1126891415),s=u(s,c,i,n,t[e+14],15,-1416354905),n=u(n,s,c,i,t[e+5],21,-57434055),i=u(i,n,s,c,t[e+12],6,1700485571),c=u(c,i,n,s,t[e+3],10,-1894986606),s=u(s,c,i,n,t[e+10],15,-1051523),n=u(n,s,c,i,t[e+1],21,-2054922799),i=u(i,n,s,c,t[e+8],6,1873313359),c=u(c,i,n,s,t[e+15],10,-30611744),s=u(s,c,i,n,t[e+6],15,-1560198380),n=u(n,s,c,i,t[e+13],21,1309151649),i=u(i,n,s,c,t[e+4],6,-145523070),c=u(c,i,n,s,t[e+11],10,-1120210379),s=u(s,c,i,n,t[e+2],15,718787259),n=u(n,s,c,i,t[e+9],21,-343485551),i=r(i,h),n=r(n,f),s=r(s,d),c=r(c,p)}return[i,n,s,c]}function h(t,e=n.Hex){const i=e||n.Base64,r=c(function(t){const e=[];for(let i=0,n=8*t.length;i<n;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}(t),8*t.length);switch(i){case n.Raw:return r;case n.Hex:return function(t){const e="0123456789abcdef",i=[];for(let n=0,r=4*t.length;n<r;n++)i.push(e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15));return i.join("")}(r);case n.String:return function(t){const e=[];for(let i=0,n=32*t.length;i<n;i+=8)e.push(String.fromCharCode(t[i>>5]>>>i%32&255));return e.join("")}(r);case n.Base64:return function(t){const e=[];for(let i=0,n=4*t.length;i<n;i+=3){const n=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255;for(let r=0;r<4;r++)8*i+6*r>32*t.length?e.push("="):e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6*(3-r)&63))}return e.join("")}(r)}}},21220:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=class{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}},95738:(t,e,i)=>{"use strict";var n,r;function s(t){switch(t){case"left":return n.Left;case"right":return n.Right;case"center":case"justify":return n.Center}}function a(t){switch(t){case"top":return r.Top;case"middle":return r.Center;case"baseline":return r.Baseline;case"bottom":return r.Bottom}}function o(t){switch(t){case"above-left":return[n.Right,r.Bottom];case"above-center":case"above-along":return[n.Center,r.Bottom];case"above-right":return[n.Left,r.Bottom];case"center-left":return[n.Right,r.Center];case"center-center":case"center-along":return[n.Center,r.Center];case"center-right":return[n.Left,r.Center];case"below-left":return[n.Right,r.Top];case"below-center":case"below-along":return[n.Center,r.Top];case"below-right":return[n.Left,r.Top];case"always-horizontal":return[n.Center,r.Baseline];default:return console.debug(`Found invalid placement type ${t}`),[n.Center,r.Center]}}function l(t){switch(t){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function u(t){switch(t){case r.Top:return 1;case r.Center:return 0;case r.Bottom:case r.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}function c(t){switch(t){case"left":return n.Left;case"right":return n.Right;case"center":case"justify":return n.Center}}i.d(e,{TR:()=>r,qv:()=>o,Hd:()=>c,kH:()=>s,g:()=>l,b7:()=>a,tf:()=>u}),function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"}(n||(n={})),function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(r||(r={}))},49183:(t,e,i)=>{"use strict";i.d(e,{Nr:()=>v});var n=i(46652),r=i(10042),s=i(28465),a=i(80511),o=i(95738),l=i(4217),u=i(21220),c=i(18193);class h{constructor(t,e,i,n){this.center=(0,a.f)(t,e),this.centerT=(0,a.c)(),this.halfWidth=i/2,this.halfHeight=n/2,this.width=i,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new h(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,e=4){const i=Math.abs(t.centerT[0]-this.centerT[0]),n=Math.abs(t.centerT[1]-this.centerT[1]),r=(t.halfWidth+this.halfWidth+e)/i,s=(t.halfHeight+this.halfHeight+e)/n,a=Math.min(r,s);return(0,c.k3)(a)}extend(t){const e=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),n=Math.max(this.xmax,t.xmax)-e,r=Math.max(this.ymax,t.ymax)-i,s=e+n/2,a=i+r/2;this.width=n,this.height=r,this.halfWidth=n/2,this.halfHeight=r/2,this.x=s,this.y=a}static deserialize(t){const e=t.readF32(),i=t.readF32(),n=t.readInt32(),r=t.readInt32();return new h(e,i,n,r)}}const f=h,d=Math.PI/180;class p{constructor(t,e,i,n){this._rotationT=(0,s.c)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const r=i.rect,a=new Float32Array(8);t*=n,e*=n;const o=i.code?r.width*n:i.metrics.width,l=i.code?r.height*n:i.metrics.height;a[0]=t,a[1]=e,a[2]=t+o,a[3]=e,a[4]=t,a[5]=e+l,a[6]=t+o,a[7]=e+l,this._data=a,this._setTextureCoords(r),this._scale=n,this._mosaic=i,this.x=t,this.y=e,this.maxOffset=Math.max(t+o,e+l)}get width(){return this._mosaic.metrics.width*this._scale}get mosaic(){return this._mosaic}set angle(t){this._angle=t,(0,r.i)(this._rotationT),(0,r.r)(this._rotationT,this._rotationT,-t),this._setOffsets(this._data)}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(this._data),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:t,width:e}=this._mosaic.metrics,i=e*this._scale,n=Math.abs(t)*this._scale,a=new Float32Array(8);a[0]=this.x,a[1]=this.y,a[2]=this.x+i,a[3]=this.y,a[4]=this.x,a[5]=this.y+n,a[6]=this.x+i,a[7]=this.y+n;const o=(0,r.m)((0,s.c)(),this._rotationT,this._T);(0,s.t)(a,a,o);let l=1/0,u=1/0,c=0,h=0;for(let t=0;t<4;t++){const e=a[2*t],i=a[2*t+1];l=Math.min(l,e),u=Math.min(u,i),c=Math.max(c,e),h=Math.max(h,i)}const d=c-l,p=h-u,m=l+d/2,g=u+p/2;this._bounds=new f(m,g,d,p)}return this._bounds}setTransform(t){this._T=t,this._offsets=null}_setOffsets(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const e=this._offsets,i=new Float32Array(8),n=(0,r.m)((0,s.c)(),this._rotationT,this._T);(0,s.t)(i,t,n),e.upperLeft=(0,l.UJ)(8*i[0],8*i[1]),e.upperRight=(0,l.UJ)(8*i[2],8*i[3]),e.lowerLeft=(0,l.UJ)(8*i[4],8*i[5]),e.lowerRight=(0,l.UJ)(8*i[6],8*i[7])}_setTextureCoords({x:t,y:e,width:i,height:n}){this._texcoords={upperLeft:(0,l.UJ)(t,e),upperRight:(0,l.UJ)(t+i,e),lowerLeft:(0,l.UJ)(t,e+n),lowerRight:(0,l.UJ)(t+i,e+n)}}}const m=(t,e)=>({code:0,page:0,sdf:!0,rect:new u.Z(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});class g{constructor(t,e,i){this._rotation=0,this._decorate(t,e,i),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=e.length>1,this._hasRotation=0!==i.angle,this._T=this._createGlyphTransform(this.bounds,i);for(const e of t)e.setTransform(this._T)}setRotation(t){if(0===t&&0===this._rotation)return;this._rotation=t;const e=this._T,i=(0,r.b)((0,s.c)(),t);(0,r.m)(e,i,e);for(const t of this.glyphs)t.setTransform(this._T)}_decorate(t,e,i){if(!i.decoration||"none"===i.decoration||!t.length)return;const n=i.scale,r="underline"===i.decoration?30:20,s=t[0].textureBinding;for(const i of e){const e=i.startX*n,a=i.startY*n,o=(i.width+i.glyphWidthEnd)*n;t.push(new p(e,a+r*n,m(o,s),1))}}get boundsT(){const t=this.bounds,e=(0,n.s)((0,a.c)(),t.x,t.y);if((0,n.t)(e,e,this._T),this._hasRotation){const i=Math.max(t.width,t.height);return new f(e[0],e[1],i,i)}return new f(e[0],e[1],t.width,t.height)}_createBounds(t){let e=1/0,i=1/0,n=0,r=0;for(const s of t)e=Math.min(e,s.xTopLeft),i=Math.min(i,s.yTopLeft),n=Math.max(n,s.xTopLeft+s.width),r=Math.max(r,s.yBottomRight);const s=n-e,a=r-i;return new f(e+s/2,i+a/2,s,a)}_createGlyphTransform(t,e){const i=d*e.angle,o=(0,s.c)(),l=(0,a.c)();return(0,r.t)(o,o,(0,n.s)(l,e.xOffset,-e.yOffset)),e.isCIM?(0,r.r)(o,o,i):((0,r.t)(o,o,(0,n.s)(l,t.x,t.y)),(0,r.r)(o,o,i),(0,r.t)(o,o,(0,n.s)(l,-t.x,-t.y))),o}}class y{constructor(t,e,i,n,r,s){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(e,i)),this.end=Math.max(0,Math.max(e,i)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=n,this.yMin=r,this.yMax=s}}const b=t=>10===t,x=t=>32===t;function v(t,e,i){const n=i.scale,r=new Array,s=function(t,e,i){const n=new Array,r=1/i.scale,s=i.maxLineWidth*r,a=e?t.length-1:0,o=e?-1:t.length,l=e?-1:1;let u=a,c=0,h=0,f=u,d=f,p=0,m=1/0,g=0;for(;u!==o;){const{code:e,metrics:i}=t[u],r=Math.abs(i.top);if(b(e)||x(e)||(m=Math.min(m,r),g=Math.max(g,r+i.height)),b(e))u!==a&&(n.push(new y(t,f,u-l,c,m,g)),m=1/0,g=0),c=0,f=u+l,d=u+l,h=0;else if(x(e))d=u+l,h=0,p=i.advance,c+=i.advance;else if(c>s){if(d!==f){const e=d-2*l;c-=p,n.push(new y(t,f,e,c-h,m,g)),m=1/0,g=0,f=d,c=h}else n.push(new y(t,f,u-l,c,m,g)),m=1/0,g=0,f=u,d=u,c=0;c+=i.advance,h+=i.advance}else c+=i.advance,h+=i.advance;u+=l}const v=new y(t,f,u-l,c,m,g);return v.start>=0&&v.end<t.length&&n.push(v),n}(t,e,i),a=function(t,e){let i=0;for(let e=0;e<t.length;e++){const{width:n}=t[e];i=Math.max(n,i)}const n="underline"===e.decoration?4:0,r=t[0].yMin;return{x:0,y:r,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+n-r,width:i}}(s,i),{vAlign:l,hAlign:u}=i,c=l===o.TR.Baseline?1:0,h=c?0:l-1,f=(1-c)*-a.y+h*(a.height/2)+-26*(c?1:0);for(let e=0;e<s.length;e++){const{start:a,end:o,width:l}=s[e];let c=-1*(u+1)*(l/2)-3;const h=e*i.lineHeight+f-3;s[e].startX=c,s[e].startY=h;for(let e=a;e<=o;e++){const i=t[e];if(b(i.code))continue;const s=new p(c+i.metrics.left,h-i.metrics.top,i,n);c+=i.metrics.advance,r.push(s)}}return new g(r,s,i)}},53372:(t,e,i)=>{"use strict";i.d(e,{E:()=>r});const n=new(i(86348).Z);function r(t){if(!n.hasBidiChar(t))return[t,!1];let e;return e="rtl"===n.checkContextual(t)?"IDNNN":"ICNNN",[n.bidiTransform(t,e,"VLYSN"),!0]}},79059:(t,e,i)=>{"use strict";i.d(e,{MD:()=>V,Ew:()=>L,PY:()=>S});var n=i(1867),r=i(31641),s=i(18029),a=i(9783),o=i(29107),l=i(15982),u=(i(235),i(42678)),c=(i(18665),i(17339),i(56864),i(9311),i(94268),i(15069)),h=(i(74843),i(73948)),f=i(9963),d=i(26986),p=i(77246),m=i(27134),g=i(2612),y=i(48005),b=i(38912);const x=a.Z.getLogger("esri.views.2d.layers.features.schemaUtils"),v="ValidationError",w={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function T(t){return(0,d.hF)(t)}function F(t){switch(t.type){case"line-marker":var e;return{type:"line-marker",color:null==(e=t.color)?void 0:e.toJSON(),placement:t.placement,style:t.style};default:return(0,u.i)(t.toJSON()).toJSON()}}function S(t,e,i){if(!t)return null;let n=0,r=!1,a=0;switch((0,s.pC)(e)&&(a=(0,g.J)(e),"visualVariables"in e&&(n=function(t){if(!t)return f.X.NONE;let e=0;for(const i of t)if("size"===i.type){const t=(0,m.a)(i);e|=t,"outline"===i.target&&(e|=t<<4)}else"color"===i.type?e|=f.X.COLOR:"opacity"===i.type?e|=f.X.OPACITY:"rotation"===i.type&&(e|=f.X.ROTATION);return e}(e.visualVariables||[]),r="dot-density"===e.type)),t.type){case"simple-fill":case"picture-fill":return function(t,e,i,n){const r=(0,d.jj)(f.LW.FILL,e,!1,i),s=n?T(r):r,a=t.clone(),o=a.outline;a.outline=null;const l=[],u={materialKey:s,hash:a.hash(),...F(a)};if(l.push(u),o){const t=(0,d.jj)(f.LW.LINE,e,!0,!1),i={materialKey:n?T(t):t,hash:o.hash(),...F(o)};l.push(i)}return{type:"composite-symbol",layers:l,hash:l.reduce(((t,e)=>e.hash+t),"")}}(t,n,r,i);case"simple-marker":case"picture-marker":return function(t,e,i,n){const r=(0,d.jj)(f.LW.MARKER,e,!1,!1),s=n?T(r):r,a=F(t);return{materialKey:s,hash:t.hash(),...a,angle:t.angle,maxVVSize:i}}(t,n,a,i);case"simple-line":return function(t,e,i){const n=(0,d.jj)(f.LW.LINE,e,!1,!1),r=i?T(n):n,s=t.clone(),a=s.marker;s.marker=null;const o=[];if(o.push({materialKey:r,hash:s.hash(),...F(s)}),a){var l;const t=(0,d.jj)(f.LW.MARKER,e,!1,!1),n=i?T(t):t;a.color=null!=(l=a.color)?l:s.color,o.push({materialKey:n,hash:a.hash(),lineWidth:s.width,...F(a)})}return{type:"composite-symbol",layers:o,hash:o.reduce(((t,e)=>e.hash+t),"")}}(t,n,i);case"text":return function(t,e,i,n){const r=(0,d.jj)(f.LW.TEXT,e,!1,!1),s=n?T(r):r,a=F(t);return{materialKey:s,hash:t.hash(),...a,angle:t.angle,maxVVSize:i}}(t,n,a,i);case"label":return function(t,e,i){const n=(0,d.jj)(f.LW.LABEL,e,!1,!1,t.labelPlacement);return{materialKey:i?T(n):n,hash:t.hash(),...t.toJSON(),labelPlacement:t.labelPlacement}}(t,n,i);case"cim":return{type:"cim",rendererKey:n,data:t.data,maxVVSize:a};case"web-style":return{...F(t),type:"web-style",hash:t.hash(),rendererKey:n,maxVVSize:a};default:throw new Error(`symbol not supported ${t.type}`)}}function _(t,e){const i=(0,r.d9)(t);return i.some((t=>function(t,e){const i=t.labelPlacement,n=w[e];if(!t.symbol)return x.warn("No LabelClass symbol specified."),!0;if(!n)return x.error(new o.Z("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${e} is not supported`)),!0;if(!n.some((t=>t===i))){const r=n[0];i&&x.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${r}`),t.labelPlacement=r}return!1}(t,e)))?[]:i}function L(t){return(0,n.Z)("esri-2d-update-debug")&&console.debug("Created new schema",M(t,!0)),M(t)}function M(t,e=!1){try{var i,n;const r=function(t,e=!1){const i=new Array;return i.push(function(t,e,i=!1){const n={indexCount:0,fields:{}},r="featureReduction"in t&&t.featureReduction,s=r?"aggregate":"feature";switch(t.renderer.type){case"heatmap":{const{blurRadius:e,fieldOffset:i,field:r}=t.renderer;return{type:"heatmap",aggregateFields:[],attributes:n,target:s,storage:null,mesh:{blurRadius:e,fieldOffset:i,field:z(n,{target:s,field:r,resultType:"numeric"}).field}}}default:{const e=[],a="aggregate"===s?(0,h.S1)(e,t.renderer,r,null):t.renderer;!function(t,e){const i={mesh:!0,storage:!0};for(const n of e){const{name:e,outStatistic:r}=n,{statisticType:s,onStatisticField:a}=r;let o=null,l=null,u=null;const c="numeric",h="feature";"onStatisticValueExpression"in r?l=E(t,{type:"expression",target:h,valueExpression:r.onStatisticValueExpression,resultType:c}).fieldIndex:"onStatisticNormalizationField"in r?(o=E(t,{type:"field",target:h,field:a,resultType:c}).field,u=r.onStatisticNormalizationField):o=E(t,{type:"field",target:h,field:a,resultType:c}).field,E(t,{type:"statistic",target:"aggregate",name:e,context:i,inField:o,inNormalizationField:u,inFieldIndex:l,statisticType:s})}}(n,e);const l=V(n,s,a,i);let u=null;const f=function(t,e,i){switch(i.type){case"dot-density":return function(t,e,i){return i&&i.length?{type:"dot-density",mapping:i.map(((i,n)=>{const{field:r,fieldIndex:s}=z(t,{valueExpression:i.valueExpression,field:i.field,resultType:"numeric",target:e});return{binding:n,field:r,fieldIndex:s}})),target:e}:{type:"dot-density",mapping:[],target:e}}(t,e,i.attributes);case"simple":case"class-breaks":case"unique-value":return function(t,e,i){if(!i||!i.length)return{type:"visual-variable",mapping:[],target:e};const n={storage:!0},r="numeric";return{type:"visual-variable",mapping:(0,y.t)(i).map((i=>{var s;const a=(0,p.nU)(i.type),{field:o,fieldIndex:l}=z(t,{target:e,valueExpression:i.valueExpression,field:i.field,context:n,resultType:r});switch(i.type){case"size":return"$view.scale"===i.valueExpression?null:{type:"size",binding:a,field:o,fieldIndex:l,normalizationField:z(t,{target:e,field:i.normalizationField,context:n,resultType:r}).field,valueRepresentation:null!=(s=i.valueRepresentation)?s:null};case"color":return{type:"color",binding:a,field:o,fieldIndex:l,normalizationField:z(t,{target:e,field:i.normalizationField,context:n,resultType:r}).field};case"opacity":return{type:"opacity",binding:a,field:o,fieldIndex:l,normalizationField:z(t,{target:e,field:i.normalizationField,context:n,resultType:r}).field};case"rotation":return{type:"rotation",binding:a,field:o,fieldIndex:l}}})).filter((t=>t)),target:e}}(t,e,i.visualVariables);case"heatmap":case"dictionary":return null}}(n,s,a),d=(0,b.o)(t.geometryType);let m=t.labelsVisible&&t.labelingInfo||[],g=[];if(r){if("selection"===r.type)throw new o.Z(v,"Mapview does not support `selection` reduction type",r);if(r.symbol){const t=new c.Z({symbol:r.symbol,visualVariables:"visualVariables"in a?a.visualVariables:null});u=V(n,s,t,i)}g=r&&r.labelsVisible&&r.labelingInfo||[]}m=_(m,d),g=_(g,d);let x=0;const w=[...m.map((t=>C(a,n,t,"feature",x++,i))),...g.map((t=>C(a,n,t,"aggregate",x++,i)))];return{type:"symbol",target:s,attributes:n,aggregateFields:e,storage:f,mesh:{matcher:l,labels:w,aggregateMatcher:u}}}}}(t)),i}(t,e),s={};return r.map((e=>function(t,e,i){switch(i.target){case"feature":return void B(t,R(e),i);case"aggregate":{const n=e.featureReduction;if("selection"===n.type)throw new o.Z(v,"Mapview does not support `selection` reduction type",n);return B(t,R(e),i),void function(t,e,i){t.aggregate||(t.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,l.F2)(e.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,l.F2)(e.clusterMaxSize)/64),fields:i.aggregateFields}}),A(t.aggregate,i.attributes.fields)}(t,n,i)}}}(s,t,e))),{source:{definitionExpression:t.definitionExpression,fields:t.fields.map((t=>t.toJSON())),gdbVersion:t.gdbVersion,historicMoment:null==(i=t.historicMoment)?void 0:i.getTime(),outFields:t.availableFields,pixelBuffer:t.pixelBuffer,spatialReference:t.spatialReference.toJSON(),timeExtent:null==(n=t.timeExtent)?void 0:n.toJSON()},attributes:{fields:{},indexCount:0},processors:r,targets:s}}catch(t){if(t.fieldName===v)return x.error(t),null;throw t}}function A(t,e){for(const i in e){const n=e[i];if(n.target!==t.name)continue;const r=t.attributes[i];r?(r.context.mesh=r.context.mesh||n.context.mesh,r.context.storage=r.context.storage||n.context.storage):t.attributes[i]=n}return t}function R(t){var e,i,n,r,s;return[null!=(e=null==(i=t.filter)?void 0:i.toJSON())?e:null,null!=(n=null==(r=t.effect)||null==(s=r.filter)?void 0:s.toJSON())?n:null]}function B(t,e,i){return t.feature||(t.feature={name:"feature",input:"source",filters:e,attributes:{}}),A(t.feature,i.attributes.fields),t}function z(t,e){return e.field?E(t,{...e,type:"field",field:e.field}):e.valueExpression?E(t,{...e,type:"expression",valueExpression:e.valueExpression}):{field:null,fieldIndex:null}}function E(t,e){switch(e.type){case"expression":{const i=e.valueExpression;if(!t.fields[i]){const n=t.indexCount++;t.fields[i]={...e,name:i,fieldIndex:n}}return{fieldIndex:t.fields[i].fieldIndex}}case"label-expression":{const i=JSON.stringify(e.label);if(!t.fields[i]){const n=t.indexCount++;t.fields[i]={...e,name:i,fieldIndex:n}}return{fieldIndex:t.fields[i].fieldIndex}}case"field":{const i=e.field;return"aggregate"===e.target&&t.fields[i]||(t.fields[i]={...e,name:i}),{field:i}}case"statistic":return t.fields[e.name]={...e},{field:e.name}}}function C(t,e,i,n,r,s=!1){const a=E(e,{type:"label-expression",target:n,context:{mesh:!0},resultType:"string",label:{labelExpression:i.labelExpression,labelExpressionInfo:i.labelExpressionInfo?{expression:i.labelExpressionInfo.expression}:null,symbol:!!i.symbol,where:i.where}}),{fieldIndex:o}=a;return{...S(i,t,s),fieldIndex:o,target:n,index:r}}function V(t,e,i,n=!1){const r=(0,s.Pt)(t,{indexCount:0,fields:{}});switch(i.type){case"simple":case"dot-density":return function(t,e,i,n=!1){const r=e.getSymbols();return{type:"simple",symbol:S(r.length?r[0]:null,e,n),isDotDensity:i}}(0,i,"dot-density"===i.type,n);case"class-breaks":return function(t,e,i,n=!1){const r=i.backgroundFillSymbol,{field:s,fieldIndex:a}=z(t,{target:e,field:i.field,valueExpression:i.valueExpression,resultType:"numeric",context:{mesh:!0,use:"renderer.field"}}),o=i.normalizationType,l="log"===o?"esriNormalizeByLog":"percent-of-total"===o?"esriNormalizeByPercentOfTotal":"field"===o?"esriNormalizeByField":null,u=i.classBreakInfos.map((t=>({symbol:S(t.symbol,i,n),min:t.minValue,max:t.maxValue}))).sort(((t,e)=>t.min-e.min));return{type:"interval",attributes:t.fields,field:s,fieldIndex:a,backgroundFillSymbol:S(r,i,n),defaultSymbol:S(i.defaultSymbol,i,n),intervals:u,normalizationField:i.normalizationField,normalizationTotal:i.normalizationTotal,normalizationType:l,isMaxInclusive:i.isMaxInclusive}}(r,e,i,n);case"unique-value":return function(t,e,i,n=!1){const r=[],s=i.backgroundFillSymbol,a={target:e,context:{mesh:!0},resultType:"string"};if(i.field&&"string"!=typeof i.field)throw new o.Z(v,"Expected renderer.field to be a string",i);const{field:l,fieldIndex:u}=z(t,{...a,field:i.field,valueExpression:i.valueExpression});for(const t of i.uniqueValueInfos)r.push({value:""+t.value,symbol:S(t.symbol,i,n)});return{type:"map",attributes:t.fields,field:l,fieldIndex:u,field2:z(t,{...a,field:i.field2}).field,field3:z(t,{...a,field:i.field3}).field,fieldDelimiter:i.fieldDelimiter,backgroundFillSymbol:S(s,i),defaultSymbol:S(i.defaultSymbol,i),map:r}}(r,e,i,n);case"dictionary":return function(t,e,i=!1){return{type:"dictionary",renderer:e.toJSON()}}(0,i,n)}}},2612:(t,e,i)=>{"use strict";i.d(e,{G:()=>c,J:()=>u});var n=i(15982),r=i(33142),s=i(16232),a=i(33940),o=i(42873);const l={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1};function u(t){if(!("visualVariables"in t))return 0;if(!t.hasVisualVariables("size"))return 0;const e=t.getVisualVariablesForType("size");if(!e[0])return 0;const i=e[0];if("stops"===i.transformationType)return i.stops.map((t=>t.size)).reduce(y,0);if("clamped-linear"===i.transformationType){let t=-1/0,e=-1/0;return t="number"==typeof i.maxSize?i.maxSize:i.maxSize.stops.map((t=>t.size)).reduce(y,0),e="number"==typeof i.minSize?i.minSize:i.minSize.stops.map((t=>t.size)).reduce(y,0),Math.max(t,e)}return"real-world-size"===i.transformationType?30:void 0}async function c(t,e,i){if(!t||i&&"cluster"===i.type)return 0;if("heatmap"===t.type)return Math.round(3*t.blurRadius);if("dot-density"===t.type)return 0;if("dictionary"===t.type)return"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?100:200;const r=t.getSymbols(),s=u(t),a=[];for(const t of r)a.push(m(t,s));const o=await Promise.all(a);return(0,n.F2)(o.reduce(y,0))}const h=[0,0,0,0];function f(t,e){return null==t?e:t}const d={sdf:!0,code:99,metrics:r.eF.metrics,rect:new s.Z(0,0,24,24),page:0,textureBinding:2};async function p(t,e){if("simple-marker"===t.type){const i=Math.max(f(t.size,12),e);return g(t)+.707*i}if("picture-marker"===t.type){const i=Math.max(f(t.height,12),e),n=f(t.width,12)*(i/f(t.height,12))/2,r=i/2;return g(t)+Math.sqrt(n*n+r*r)}if("text"===t.type){const e=function(t){const e=t.text&&t.text.length;if(!e)return{glyphMosaicItems:[d]};const i=[];for(let n=0;n<e;n++)i.push({...d,code:t.text.charCodeAt(n)});return{glyphMosaicItems:i}}(t);(0,o.Q2)(h,t.toJSON(),e);const i=Math.abs(h[0]),n=Math.abs(h[1]),r=h[2],s=h[3];return Math.max(i,n)+Math.max(r,s)}if("simple-line"===t.type){const i=t,n=Math.max(f(i.width,.75),e)/2;return i.marker?Math.max(6*i.width,2*e):n}if("simple-fill"===t.type||"picture-fill"===t.type)return Math.max(function(t,e){return null==t.outline?0:f(t.outline.width,0)}(t),e)/2;if("cim"===t.type){const e=a.B$.getEnvelope(t.data);return e?Math.sqrt(e.width*e.width+e.height*e.height):0}return"web-style"===t.type?p(await t.fetchCIMSymbol(),e):0}async function m(t,e){return function(t){return t.type in l}(t)?Math.min(await p(t,e),75):0}function g(t){const e=f(t.xoffset,0),i=f(t.yoffset,0);return Math.sqrt(e*e+i*i)}function y(t,e){return Math.max(t,e)}},48005:(t,e,i)=>{"use strict";i.d(e,{a:()=>a,t:()=>o});var n=i(9783),r=i(15982);const s=n.Z.getLogger("esri.renderers.visualVariables.support.utils"),a=t=>{if(!("visualVariables"in t)||!t.visualVariables||!t.visualVariables.length)return t;const e=t.clone(),i=e.visualVariables.map((t=>l(t)?u(t):t));return e.visualVariables=i,e};function o(t){return t.map((t=>l(t)?u(t.clone()):t))}function l(t){return("size"===t.type||"color"===t.type||"opacity"===t.type)&&null!=t.stops}function u(t){return t.stops=function(t,e){return e.length<=8?e:(s.warn(`Found ${e.length} Visual Variable stops, but MapView only supports 8. Displayed stops will be simplified.`),e.length>16?function(t,e){const[i,...n]=e,s=n.pop(),a=n[0].value,o=n[n.length-1].value,l=(o-a)/6,u=[];for(let i=a;i<o;i+=l){let s=0;for(;i>=n[s].value;)s++;const a=n[s],o=e[s-1],l=i-o.value,h=a.value===o.value?1:l/(a.value-o.value);if("color"===t){const t=n[s],r=e[s-1],a=t.color.clone();a.r=c(r.color.r,a.r,h),a.g=c(r.color.g,a.g,h),a.b=c(r.color.b,a.b,h),a.a=c(r.color.a,a.a,h),u.push({value:i,color:a,label:t.label})}else if("size"===t){const t=n[s],a=e[s-1],o=(0,r.t_)(t.size),l=c((0,r.t_)(a.size),o,h);u.push({value:i,size:l,label:t.label})}else{const t=n[s],r=c(e[s-1].opacity,t.opacity,h);u.push({value:i,opacity:r,label:t.label})}}return[i,...u,s]}(t,e):function(t){const[e,...i]=t,n=i.pop();for(;i.length>6;){let t=0,e=0;for(let n=1;n<i.length;n++){const r=i[n-1],s=i[n],a=Math.abs(s.value-r.value);a>e&&(e=a,t=n)}i.splice(t,1)}return[e,...i,n]}(e))}(t.type,t.stops),t}function c(t,e,i){return(1-i)*t+i*e}},42873:(t,e,i)=>{"use strict";i.d(e,{y1:()=>S,I_:()=>F,zX:()=>L,oD:()=>k,Il:()=>O,Zw:()=>P,Q2:()=>W,eT:()=>R,Zu:()=>_,yA:()=>A,nl:()=>N,ab:()=>M}),i(1867);var n=i(18029),r=i(85376),s=i(11949),a=i(3414),o=i(15982),l=i(41752),u=i(89751),c=i(42176),h=i(46652),f=i(10042),d=i(28465),p=i(80511),m=i(95738),g=i(49183),y=i(53372),b=i(33940);const x=Math.PI/180,v=.04,w=(0,d.c)(),T=(0,p.c)(),F=512,S=50;function _(t,e){if(!e.isWrappable)return null;const[i,n]=(0,u.uS)(e);return t[2]>n?[(0,l.Ue)([t[0],t[1],n,t[3]]),(0,l.Ue)([i,t[1],i+t[2]-n,t[3]])]:t[0]<i?[(0,l.Ue)([i,t[1],t[2],t[3]]),(0,l.Ue)([n-(i-t[0]),t[1],n,t[3]])]:null}function L(t,e,i,n,o,l,u){if(!n||!i.symbol)return t[0]=t[1]=t[2]=t[3]=0,e[0]=e[1]=e[2]=e[3]=0,t;const h=n;if(!(0,a.wp)(h)){(0,s.$P)(t,h);let n=e[0];0===n&&(n=Z(i),e[0]=n);const r=o*n/2;return t[0]-=r,t[1]-=r,t[2]+=r,t[3]+=r,t}{const n=h.x,s=h.y;"esriTS"===i.symbol.type&&0===e[2]&&0===e[3]&&W(e,i.symbol,i.mosaicItem),function(t,e,i,n,s,a,o,l){let u;switch(n.type){case"esriSMS":case"esriPMS":u=O(e,i,n,a,o,0);break;case"esriTS":u=P(e,i,n,s,a,0);break;case"cim":case"CIMSymbolReference":case"expanded-cim":u=k(e,i,n,a,o,0)}let h,f,d=0;for(let t=0;t<u.rings[0].length-1;t++)f=u.rings[0][t],h=(e-f[0])*(e-f[0])+(i-f[1])*(i-f[1]),d=Math.max(d,h);d=Math.sqrt(d);let p=(0,c.or)(e-d,l),m=(0,c.or)(e+d,l);if(p>m){const t=(0,r.C5)(l);if(t){const[e,i]=t.valid;p=e,m=i}}t[0]=p,t[1]=i-d,t[2]=m,t[3]=i+d}(t,n,s,i.symbol,e,o,l,u)}return t}function M(t){return"text"===t||"esriTS"===t}function A(t){return"simple-marker"===t||"picture-marker"===t||"esriSMS"===t||"esriPMS"===t}function R(t){switch((0,n.Wg)(t.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}const B=(0,p.c)(),z=(0,p.c)(),E=(0,p.c)(),C=(0,p.c)(),V=(0,p.c)(),U=(0,p.c)(),I=(0,p.c)();function N(t,e,i,n){(0,h.s)(E,e,i);const r=t.paths;let s,a,o,l,u,c,f,d,p,m=1/0;for(let t=0;t<r.length;t++){const g=r[t];if(!(g.length<2))for(let t=1;t<g.length;t++)s=g[t-1][0],o=g[t-1][1],a=g[t][0],l=g[t][1],u=Math.min(s,a)-n,c=Math.min(o,l)-n,f=Math.max(s,a)+n,d=Math.max(o,l)+n,e<u||e>f||i<c||i>d||((0,h.s)(B,s,o),(0,h.s)(z,a,l),(0,h.d)(C,z,B),(0,h.d)(V,B,E),(0,h.a)(U,C,(0,h.g)(C,V)/(0,h.g)(C,C)),(0,h.d)(I,V,U),p=(0,h.g)(I,I),m>p&&(m=p))}return Math.sqrt(m)<=n}function O(t,e,i,n,r,s){let a,l;const u=(0,o.F2)(i.xoffset),c=(0,o.F2)(i.yoffset),d=x*i.angle,p=x*s;switch(i.type){case"esriSMS":a=l=(0,o.F2)(i.size);break;case"esriPMS":a=(0,o.F2)(i.width),l=(0,o.F2)(i.height)}r<v&&(n=v*n/r);const m=(0,f.i)(w);(0,f.t)(m,m,(0,h.s)(T,t,e)),(0,f.r)(m,m,p-d),(0,f.s)(m,m,(0,h.s)(T,n,-n)),(0,f.t)(m,m,(0,h.s)(T,u,-c));const g=[0,0];(0,h.t)(g,(0,h.s)(T,-.5*a,-.5*l),m);const y=[0,0];(0,h.t)(y,(0,h.s)(T,-.5*a,.5*l),m);const b=[0,0];(0,h.t)(b,(0,h.s)(T,.5*a,-.5*l),m);const F=[0,0];return(0,h.t)(F,(0,h.s)(T,.5*a,.5*l),m),{rings:[[g,b,F,y,g]]}}function k(t,e,i,n,r,s){const a=b.B$.getEnvelope(i.data);if(!a)return null;r<v&&(n=v*n/r);const l=(0,o.F2)(a.width),u=(0,o.F2)(a.height),c=(0,o.F2)(a.x),d=(0,o.F2)(a.y),p=0*x,m=x*s,g=(0,f.i)(w);(0,f.t)(g,g,(0,h.s)(T,t,e)),(0,f.r)(g,g,m-p),(0,f.s)(g,g,(0,h.s)(T,n,n));const y=[0,0];(0,h.t)(y,(0,h.s)(T,c,d+u),g);const F=[0,0];(0,h.t)(F,(0,h.s)(T,c,d),g);const S=[0,0];(0,h.t)(S,(0,h.s)(T,c+l,d+u),g);const _=[0,0];return(0,h.t)(_,(0,h.s)(T,c+l,d),g),{rings:[[y,S,_,F,y]]}}function P(t,e,i,n,r,s){const a=(0,o.F2)(i.xoffset),l=(0,o.F2)(i.yoffset),u=x*i.angle,c=x*s,d=(0,f.i)(w);(0,f.t)(d,d,(0,h.s)(T,t,e)),(0,f.r)(d,d,c),(0,f.s)(d,d,(0,h.s)(T,r,-r));const p=n[0]+n[2]/2,m=n[1]+n[3]/2;(0,f.t)(d,d,(0,h.s)(T,a,-l)),(0,f.t)(d,d,(0,h.s)(T,p,m)),(0,f.r)(d,d,u),(0,f.t)(d,d,(0,h.s)(T,-p,-m));const g=[0,0];(0,h.t)(g,(0,h.s)(T,n[0],n[1]),d);const y=[0,0];(0,h.t)(y,(0,h.s)(T,n[0],n[1]+n[3]),d);const b=[0,0];(0,h.t)(b,(0,h.s)(T,n[0]+n[2],n[1]),d);const v=[0,0];return(0,h.t)(v,(0,h.s)(T,n[0]+n[2],n[1]+n[3]),d),{rings:[[g,b,v,y,g]]}}function Z(t){switch(t.symbol.type){case"esriSFS":case"esriPFS":{const e=t.symbol.outline;return e?e.width:0}case"esriSLS":return(0,o.F2)(t.symbol.width);case"esriSMS":return(0,o.F2)(t.symbol.size);case"esriPMS":return(0,o.F2)(Math.max(t.symbol.width,t.symbol.height));case"esriTS":{const e=[0,0,0,0];W(e,t.symbol,t.mosaicItem);const i=Math.max(Math.abs(e[0]),Math.abs(e[1]));return Math.max(e[2],e[3])+i}case"expanded-cim":{const e=b.B$.getEnvelope(t.symbol.data);return e.width!==-1/0&&e.height!==-1/0||(e.width=10,e.height=10,e.x=0,e.y=0),(0,o.F2)(Math.sqrt(e.width*e.width+e.height*e.height))}case"composite-symbol":{if(!t.symbol.layers.length)return 0;const e=t.symbol.layers.length-1;return Z({symbol:t.symbol.layers[e],mosaicItem:null})}case"label":default:return 0}}function W(t,e,i){if(!i||0===i.glyphMosaicItems.length)return t;const n=(0,y.E)(e.text)[1],r=i.glyphMosaicItems,s=(0,g.Nr)(r,n,{scale:(0,o.F2)(e.font.size)/24,angle:e.angle,xOffset:e.xoffset,yOffset:e.yoffset,hAlign:(0,m.kH)(e.horizontalAlignment||"center"),vAlign:(0,m.b7)(e.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(e.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(e.lineHeight||1,4)),decoration:e.font.decoration||"none",isCIM:!1}).bounds;return t[0]=(0,o.F2)(s.x-s.halfWidth),t[1]=(0,o.F2)(s.y-s.halfHeight),t[2]=(0,o.F2)(s.width),t[3]=(0,o.F2)(s.height),t}},73948:(t,e,i)=>{"use strict";i.d(e,{aV:()=>F,S1:()=>v,os:()=>w,yR:()=>S});var n,r=i(1867),s=i(18029),a=i(9783),o=i(29107),l=i(12543),u=i(41333),c=i(14230),h=i(87397),f=i(31641),d=(i(9385),i(82203)),p=i(65482),m=i(17808),g=(i(17593),i(15392),i(11786),i(12690));let y=n=class extends u.Z{writeLevels(t,e,i){for(const i in t){const t=this.levels[i];return void(e.stops=t)}}clone(){return new n({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,g.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,g.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((t=>t.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:(0,f.d9)(this.levels)})}};(0,h._)([(0,d.Cb)()],y.prototype,"levels",void 0),(0,h._)([(0,m.c)("levels")],y.prototype,"writeLevels",null),y=n=(0,h._)([(0,p.j)("esri.views.2d.engine.LevelDependentSizeVariable")],y);const b=a.Z.getLogger("esri.views.2d.layers.support.clusterUtils");r.Z.add("esri-cluster-arcade-enabled",1);const x=(0,r.Z)("esri-cluster-arcade-enabled"),v=(t,e,i,n)=>{const r=e.clone();if(!S(r))return r;if(i.fields)for(const e of i.fields)_(t,e);if("visualVariables"in r){const e=(r.visualVariables||[]).filter((t=>"$view.scale"!==t.valueExpression)),a=w(e);e.forEach((e=>{"rotation"===e.type?e.field?e.field=M(t,e.field,"avg_angle"):e.valueExpression&&(e.field=L(t,e.valueExpression,"avg_angle"),e.valueExpression=null):e.normalizationField?(e.field=M(t,e.field,"norm",e.normalizationField),e.normalizationField=null):e.field?e.field=M(t,e.field,"avg"):(e.field=L(t,e.valueExpression,"avg"),e.valueExpression=null)})),(0,s.Wi)(a)&&!T(e)&&(e.push(F(i,n)),r.dynamicClusterSize=!0),r.visualVariables=e}switch(r.type){case"simple":break;case"unique-value":r.field?r.field=M(t,r.field,"mode"):r.valueExpression&&(r.field=L(t,r.valueExpression,"mode"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=M(t,r.field,"norm",r.normalizationField),r.normalizationField=null):r.field?r.field=M(t,r.field,"avg"):(r.field=L(t,r.valueExpression,"avg"),r.valueExpression=null)}return r},w=t=>{for(const e of t)if("size"===e.type)return e;return null},T=t=>{for(const e of t)if("cluster_count"===e.field)return!0;return!1},F=(t,e)=>{const i=[new l.Z({value:0,size:0}),new l.Z({value:1})];if((0,s.Wi)(e))return new u.Z({field:"cluster_count",stops:[...i,new l.Z({value:2,size:0})]});const n=Object.keys(e).reduce(((n,r)=>({...n,[r]:[...i,new l.Z({value:Math.max(2,e[r].minValue),size:t.clusterMinSize}),new l.Z({value:Math.max(3,e[r].maxValue),size:t.clusterMaxSize})]})),{});return new y({field:"cluster_count",levels:n})},S=t=>{const e=e=>b.error(new o.Z("Unsupported-renderer",e,{renderer:t}));if("unique-value"===t.type){if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===t.type){if(t.normalizationField){const i=t.normalizationType;if("field"!==i)return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}}else if("simple"!==t.type)return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1;if(!x){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some((t=>!(!("valueExpression"in t)||!t.valueExpression))))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function _(t,e){const{name:i,outStatistic:n}=e,{onStatisticField:r,onStatisticValueExpression:s,statisticType:a}=n;if(s){const e=(0,c.F)(s.toLowerCase());t.push({name:i,outStatistic:{onStatisticField:e,onStatisticValueExpression:s,statisticType:a}})}else r?t.push({name:i,outStatistic:{onStatisticField:r,statisticType:a}}):b.error(new o.Z("mapview-unsupported-field","Unable to handle field",{field:e}))}function L(t,e,i){const n=(0,c.F)(e),r="mode"===i?`cluster_type_${n}`:`cluster_avg_${n}`;return t.some((t=>t.name===r))||t.push({name:r,outStatistic:{onStatisticField:n,onStatisticValueExpression:e,statisticType:i}}),r}function M(t,e,i,n){if("cluster_count"===e||t.some((t=>t.name===e)))return e;const r=function(t,e,i){switch(t){case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"norm":{const t=i,n="field",r=e.toLowerCase()+",norm:"+n+","+t.toLowerCase();return"cluster_avg_"+(0,c.F)(r)}}}(i,e,n);return t.some((t=>t.name===r))||("norm"===i?t.push({name:r,outStatistic:{onStatisticField:e,onStatisticNormalizationField:n,statisticType:i}}):t.push({name:r,outStatistic:{onStatisticField:e,statisticType:i}})),r}},38912:(t,e,i)=>{"use strict";i.d(e,{o:()=>r});const n=new(i(73471).Xn)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function r(t){return n.toJSON(t)}}}]);