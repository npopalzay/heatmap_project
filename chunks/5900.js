(self.webpackChunkgeog863_final=self.webpackChunkgeog863_final||[]).push([[5900,175],{15900:(e,n,t)=>{"use strict";t.r(n),t.d(n,{executeScript:()=>le,extend:()=>ce,extractFieldLiterals:()=>ue,findFunctionCalls:()=>de,functionHelper:()=>ie,referencesFunction:()=>he,referencesMember:()=>fe,validateScript:()=>se});var r=t(14790),o=t(12031),a=t(78927),i=t(49749),c=t(83746),l=t(18735),u=t(10114),s=t(81731),f=t(62448),h=t(8193),d=t(31028),p=t(39578),g=t(98322),w=t(19786),E=t(4282),y=t(9065),m=t(67258),v=t(24618),I=t(77404),N=t(77177),A=t(78625),b=t(55228),R=t(41598),S=t(77998),U=t(60175);const C=100;function Z(e){return e instanceof Error?(0,r.d1)(e):(0,r.d1)(new Error(e))}function T(e){return(0,r.DB)(e)}function O(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(D(e,n.arguments[r]));return(0,r.$6)(t)}function F(e,n,t){return(0,r.Ue)(((r,o)=>{O(e,n).then((a=>{try{r(t(e,n,a))}catch(e){o(e)}}),o)}))}function x(e,n,t){try{return O(e,n).then((o=>{try{const a=t(e,n,o);return function(e){return e&&"function"==typeof e.then}(a)?a:(0,r.DB)(a)}catch(e){return Z(e)}}))}catch(e){return Z(e)}}function D(e,n,t){try{if(n.breakpoint&&!0!==t)return n.breakpoint().then((()=>D(e,n,!0)));switch(n.type){case"VariableDeclarator":return function(e,n){try{let t=null;return t=null===n.init?(0,r.DB)(null):D(e,n.init),null!==e.localScope?t.then((t=>(0,r.Ue)((r=>{if(t===p.v&&(t=null),"Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();e.localScope[o]={value:t,valueset:!0,node:n.init},r(p.v)})))):t.then((t=>(0,r.Ue)((r=>{if("Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();t===p.v&&(t=null),e.globalScope[o]={value:t,valueset:!0,node:n.init},r(p.v)}))))}catch(e){return Z(e)}}(e,n);case"VariableDeclaration":return _(e,n,0);case"BlockStatement":return function(e,n){try{return H(e,n,0)}catch(e){return Z(e)}}(e,n);case"FunctionDeclaration":return function(e,n){try{const t=n.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new f.Z(n,e)},(0,r.DB)(p.v)}catch(e){return Z(e)}}(e,n);case"ReturnStatement":return function(e,n){return(0,r.Ue)(((t,r)=>{null===n.argument?t(new p.R(p.v)):D(e,n.argument).then((e=>{try{t(new p.R(e))}catch(e){r(e)}}),r)}))}(e,n);case"IfStatement":return function(e,n){return(0,r.Ue)(((t,r)=>{"AssignmentExpression"!==n.test.type&&"UpdateExpression"!==n.test.type?D(e,n.test).then((o=>{try{!0===o?D(e,n.consequent).then(t,r):!1===o?null!==n.alternate?D(e,n.alternate).then(t,r):t(p.v):r(new Error((0,v.H5)(n.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(e){r(e)}}),r):r(new Error((0,v.H5)(n.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ExpressionStatement":return function(e,n){try{return"AssignmentExpression"===n.expression.type?D(e,n.expression):(n.expression.type,D(e,n.expression).then((e=>(0,r.Ue)((n=>{n(e===p.v?p.v:new p.I(e))})))))}catch(e){return(0,r.d1)(e)}}(e,n);case"UpdateExpression":return function(e,n){try{const t=n.argument;if("MemberExpression"===t.type){const o={t:null};return D(e,t.object).then((n=>{let a=null;return o.t=n,!0===t.computed?a=D(e,t.property):"Identifier"===t.property.type&&(a=(0,r.DB)(t.property.name)),a})).then((e=>(0,r.Ue)((t=>{const r=o.t;let a;if((0,p.h)(r)){if(!(0,p.a)(e))throw new Error("Invalid Parameter");if(e<0&&(e=r.length+e),e<0||e>=r.length)throw new Error("Assignment outside of array bounds");a=(0,p.c)(r[e]),r[e]="++"===n.operator?a+1:a-1}else if(r instanceof g.Z){if(!1===(0,p.b)(e))throw new Error("Dictionary accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");a=(0,p.c)(r.field(e)),r.setField(e,"++"===n.operator?a+1:a-1)}else{if(!(r instanceof m.Z))throw(0,p.o)(r)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,p.b)(e))throw new Error("Feature accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");a=(0,p.c)(r.field(e)),r.setField(e,"++"===n.operator?a+1:a-1)}!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1)}))))}return(0,r.Ue)(((t,r)=>{const o="Identifier"===n.argument.type?n.argument.name.toLowerCase():"";if(!o)throw new Error("Invalid identifier");let a;return null!==e.localScope&&void 0!==e.localScope[o]?(a=(0,p.c)(e.localScope[o].value),e.localScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void 0!==e.globalScope[o]?(a=(0,p.c)(e.globalScope[o].value),e.globalScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void r(new Error("Variable not recognised"))}))}catch(e){return(0,r.d1)(e)}}(e,n);case"AssignmentExpression":return function(e,n){return(0,r.Ue)(((t,o)=>{const a=n.left;if("MemberExpression"===a.type)D(e,n.right).then((i=>{try{D(e,a.object).then((c=>{try{let l=null;if(!0===a.computed)l=D(e,a.property);else{if("Identifier"!==a.property.type)throw new Error("Expected computed or identifier for assignemnt target");l=(0,r.DB)(a.property.name)}l.then((e=>{try{if((0,p.h)(c)){if(!(0,p.a)(e))throw new Error("Invalid Parameter");if(e<0&&(e=c.length+e),e<0||e>c.length)throw new Error("Assignment outside of array bounds");if(e===c.length){if("="!==n.operator)throw new Error("Invalid Parameter");c[e]=B(i,n.operator,c[e],n)}else c[e]=B(i,n.operator,c[e],n)}else if(c instanceof g.Z){if(!1===(0,p.b)(e))throw new Error("Dictionary accessor must be a string");if(!0===c.hasField(e))c.setField(e,B(i,n.operator,c.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");c.setField(e,B(i,n.operator,null,n))}}else{if(!(c instanceof m.Z))throw(0,p.o)(c)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,p.b)(e))throw new Error("Feature accessor must be a string");if(!0===c.hasField(e))c.setField(e,B(i,n.operator,c.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");c.setField(e,B(i,n.operator,null,n))}}t(p.v)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o);else{const r=a.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[r])return void D(e,n.right).then((a=>{try{e.localScope[r]={value:B(a,n.operator,e.localScope[r].value,n),valueset:!0,node:n.right},t(p.v)}catch(e){o(e)}}),o);void 0!==e.globalScope[r]?D(e,n.right).then((a=>{try{e.globalScope[r]={value:B(a,n.operator,e.globalScope[r].value,n),valueset:!0,node:n.right},t(p.v)}catch(e){o(e)}}),o):o(new Error("Cannot assign undeclared variable"))}}))}(e,n);case"ForStatement":return function(e,n){try{return null!==n.init?D(e,n.init).then((()=>(0,r.Ue)(((t,r)=>{M(e,n,{testResult:!0,lastAction:p.v},(e=>{t(e)}),(e=>{r(e)}),0)})))):(0,r.Ue)(((t,r)=>{M(e,n,{testResult:!0,lastAction:p.v},(e=>{t(e)}),(e=>{r(e)}),0)}))}catch(e){return(0,r.d1)(e)}}(e,n);case"ForInStatement":return function(e,n){return(0,r.Ue)(((t,o)=>{D(e,n.right).then((a=>{try{let i=null;i="VariableDeclaration"===n.left.type?D(e,n.left):(0,r.DB)(),i.then((()=>{try{let r="";if("VariableDeclaration"===n.left.type){const e=n.left.declarations[0].id;"Identifier"===e.type&&(r=e.name)}else"Identifier"===n.left.type&&(r=n.left.name);if(!r)throw new Error((0,v.H5)(n,"RUNTIME","INVALIDVARIABLE"));r=r.toLowerCase();let i=null;if(null!==e.localScope&&void 0!==e.localScope[r]&&(i=e.localScope[r]),null===i&&void 0!==e.globalScope[r]&&(i=e.globalScope[r]),null===i)return void o(new Error((0,v.H5)(n,"RUNTIME","VARIABLENOTDECLARED")));(0,p.h)(a)||(0,p.b)(a)?J(e,n,a,{reject:o,resolve:t},i):(0,p.o)(a)?function(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(p.v);P(e,n,t,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}(e,n,a,{reject:o,resolve:t},i):a instanceof g.Z||a instanceof m.Z?function(e,n,t,r,o){try{J(e,n,t.keys(),r,o,"k")}catch(e){r.reject(e)}}(e,n,a,{reject:o,resolve:t},i):(0,p.z)(a)?z(a.iterator(e.abortSignal),e,n,a,i,(e=>{t(e)}),(e=>{o(e)}),0):J(e,n,[],{reject:o,resolve:t},i)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o)}))}(e,n);case"BreakStatement":return(0,r.DB)(p.x);case"EmptyStatement":return(0,r.DB)(p.v);case"ContinueStatement":return(0,r.DB)(p.y);case"TemplateElement":return function(e,n){return(0,r.DB)(n.value?n.value.cooked:"")}(0,n);case"TemplateLiteral":return function(e,n){return(0,r.Ue)((t=>{const r=[];(0,y.Dt)(n.expressions,((n,t,o,a)=>D(e,t).then((e=>{r[o]=(0,p.e)(e)})))).then((()=>{let e="",o=0;for(const t of n.quasis)e+=t.value?t.value.cooked:"",!1===t.tail&&(e+=r[o]?r[o]:"",o++);t(e)}))}))}(e,n);case"Identifier":return Y(e,n);case"MemberExpression":return function(e,n){try{return D(e,n.object).then((t=>{try{return null===t?(0,r.d1)(new Error((0,v.H5)(n,"RUNTIME","NOTFOUND"))):!1===n.computed?"Identifier"===n.property.type?t instanceof g.Z||t instanceof m.Z?(0,r.DB)(t.field(n.property.name)):t instanceof a.Z?(0,r.DB)(V(t,n.property.name,0,n)):(0,r.d1)(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE"))):(0,r.d1)(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE"))):D(e,n.property).then((e=>(0,r.Ue)(((r,o)=>{if(t instanceof g.Z||t instanceof m.Z)(0,p.b)(e)?r(t.field(e)):o(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if(t instanceof a.Z)(0,p.b)(e)?r(V(t,e,0,n)):o(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,p.h)(t))if((0,p.a)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length+e),e>=t.length||e<0)throw new Error((0,v.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t[e])}else o(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,p.o)(t))if((0,p.a)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length()+e),e>=t.length()||e<0)throw new Error((0,v.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t.get(e))}else o(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,p.b)(t))if((0,p.a)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length+e),e>=t.length||e<0)throw new Error((0,v.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t[e])}else o(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")));else o(new Error((0,v.H5)(n,"RUNTIME","INVALIDTYPE")))}))))}catch(e){return Z(e)}}))}catch(e){return Z(e)}}(e,n);case"Literal":return T(n.value);case"CallExpression":return function(e,n){try{if("Identifier"!==n.callee.type)return Z((0,v.H5)(n,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[n.callee.name.toLowerCase()]){const t=e.localScope[n.callee.name.toLowerCase()];return t.value instanceof p.N?t.value.fn(e,n):t.value instanceof f.Z?ne(e,n,t.value.definition):Z((0,v.H5)(n,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[n.callee.name.toLowerCase()]){const t=e.globalScope[n.callee.name.toLowerCase()];return t.value instanceof p.N?t.value.fn(e,n):t.value instanceof f.Z?ne(e,n,t.value.definition):Z((0,v.H5)(n,"RUNTIME","NOTAFUNCTION"))}return Z((0,v.H5)(n,"RUNTIME","NOTFOUND"))}catch(e){return Z(e)}}(e,n);case"UnaryExpression":return function(e,n){try{return D(e,n.argument).then((e=>(0,r.Ue)(((t,r)=>{(0,p.i)(e)&&"!"===n.operator?t(!e):"-"===n.operator?t(-1*(0,p.c)(e)):"+"===n.operator?t(1*(0,p.c)(e)):"~"===n.operator?t(~(0,p.c)(e)):r(new Error((0,v.H5)(n,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))))}catch(e){return Z(e)}}(e,n);case"BinaryExpression":return function(e,n){try{return(0,r.$6)([D(e,n.left),D(e,n.right)]).then((e=>(0,r.Ue)(((t,r)=>{const o=e[0],a=e[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":t((0,p.u)((0,p.c)(o),(0,p.c)(a),n.operator));case"==":t((0,p.n)(o,a));break;case"!=":t(!(0,p.n)(o,a));break;case"<":case">":case"<=":case">=":t((0,p.s)(o,a,n.operator));break;case"+":(0,p.b)(o)||(0,p.b)(a)?t((0,p.e)(o)+(0,p.e)(a)):t((0,p.c)(o)+(0,p.c)(a));break;case"-":t((0,p.c)(o)-(0,p.c)(a));break;case"*":t((0,p.c)(o)*(0,p.c)(a));break;case"/":t((0,p.c)(o)/(0,p.c)(a));break;case"%":t((0,p.c)(o)%(0,p.c)(a));break;default:r(new Error((0,v.H5)(n,"RUNTIME","OPERATORNOTRECOGNISED")))}}))))}catch(e){return Z(e)}}(e,n);case"LogicalExpression":return function(e,n){return(0,r.Ue)(((t,r)=>{"AssignmentExpression"!==n.left.type&&"UpdateExpression"!==n.left.type?"AssignmentExpression"!==n.right.type&&"UpdateExpression"!==n.right.type?D(e,n.left).then((o=>{try{if(!(0,p.i)(o))throw new Error((0,v.H5)(n,"RUNTIME","ONLYBOOLEAN"));switch(n.operator){case"||":!0===o?t(o):D(e,n.right).then((e=>{try{if(!(0,p.i)(e))throw new Error((0,v.H5)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;case"&&":!1===o?t(o):D(e,n.right).then((e=>{try{if(!(0,p.i)(e))throw new Error((0,v.H5)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;default:throw new Error((0,v.H5)(n,"RUNTIME","ONLYORORAND"))}}catch(e){r(e)}}),r):r(new Error((0,v.H5)(n.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error((0,v.H5)(n.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ConditionalExpression":return Z((0,v.H5)(n,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,n){try{const t=[];for(let r=0;r<n.elements.length;r++)t.push(D(e,n.elements[r]));return(0,r.$6)(t).then((e=>(0,r.Ue)(((t,r)=>{for(let t=0;t<e.length;t++){if((0,p.q)(e[t]))return void r(new Error((0,v.H5)(n,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[t]===p.v&&(e[t]=null)}t(e)}))))}catch(e){return Z(e)}}(e,n);case"ObjectExpression":return function(e,n){try{const t=[];for(let r=0;r<n.properties.length;r++)t.push(D(e,n.properties[r]));return(0,r.$6)(t).then((e=>(0,r.Ue)((n=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];if((0,p.q)(r.value))throw new Error("Illegal Argument");if(!1===(0,p.b)(r.key))throw new Error("Illegal Argument");r.value===p.v?t[r.key.toString()]=null:t[r.key.toString()]=r.value}const r=new g.Z(t);r.immutable=!1,n(r)}))))}catch(e){return Z(e)}}(e,n);case"Property":return function(e,n){try{return D(e,n.value).then((t=>(0,r.Ue)((r=>{"Identifier"===n.key.type?r({key:n.key.name,value:t}):D(e,n.key).then((e=>{r({key:e,value:t})}))}))))}catch(e){return(0,r.d1)(e)}}(e,n);default:return Z((0,v.H5)(n,"RUNTIME","UNREOGNISED"))}}catch(e){return Z(e)}}function L(e,n,t){try{return D(e,n.body).then((o=>{try{return t.lastAction=o,t.lastAction===p.x||t.lastAction instanceof p.R?(t.testResult=!1,(0,r.DB)(t)):null!==n.update?D(e,n.update).then((()=>(0,r.DB)(t))):(0,r.DB)(t)}catch(e){return(0,r.d1)(e)}}))}catch(e){return(0,r.d1)(e)}}function M(e,n,t,o,a,i){try{(function(e,n,t){try{return null!==n.test?D(e,n.test).then((o=>{try{return!0===e.abortSignal.aborted?(0,r.d1)(new Error("Cancelled")):(t.testResult=o,!1===t.testResult?(0,r.DB)(t):!0!==t.testResult?(0,r.d1)(new Error((0,v.H5)(n,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):L(e,n,t))}catch(e){return(0,r.d1)(e)}})):L(e,n,t)}catch(e){return(0,r.d1)(e)}})(e,n,t).then((()=>{try{!0===t.testResult?++i>C?(i=0,setTimeout((()=>{M(e,n,t,o,a,i)}),0)):M(e,n,t,o,a,i):t.lastAction instanceof p.R?o(t.lastAction):o(p.v)}catch(e){a(e)}}),(e=>{a(e)}))}catch(e){a(e)}}function k(e,n,t,r,o,a,i,c,l,u){try{if(r<=a)return void c(p.v);o.value="k"===i?t[a]:a,D(e,n.body).then((s=>{try{s instanceof p.R?c(s):s===p.x?c(p.v):++u>C?(u=0,setTimeout((()=>{k(e,n,t,r,o,a+1,i,c,l,u)}),0)):k(e,n,t,r,o,a+1,i,c,l,u)}catch(e){l(e)}}),(e=>{l(e)}))}catch(e){l(e)}}function P(e,n,t,r,o,a,i,c,l){try{if(t.length()<=o)return void i(p.v);r.value="k"===a?t.get(o):o,D(e,n.body).then((u=>{u instanceof p.R?i(u):u===p.x?i(p.v):++l>C?(l=0,setTimeout((()=>{P(e,n,t,r,o+1,a,i,c,l)}),0)):P(e,n,t,r,o+1,a,i,c,l)}),(e=>{c(e)}))}catch(e){c(e)}}function J(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(p.v);k(e,n,t,t.length,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}function z(e,n,t,r,o,a,i,c){try{e.next().then((l=>{try{if(null===l)a(p.v);else{const u=m.Z.createFromGraphicLikeObject(l.geometry,l.attributes,r);u._underlyingGraphic=l,o.value=u,D(n,t.body).then((l=>{try{l===p.x?a(p.v):l instanceof p.R?a(l):++c>C?(c=0,setTimeout((()=>{z(e,n,t,r,o,a,i,c)}),0)):z(e,n,t,r,o,a,i,c)}catch(e){i(e)}}),(e=>{i(e)}))}}catch(e){i(e)}}),(e=>{i(e)}))}catch(e){i(e)}}function B(e,n,t,r){switch(n){case"=":return e===p.v?null:e;case"/=":return(0,p.c)(t)/(0,p.c)(e);case"*=":return(0,p.c)(t)*(0,p.c)(e);case"-=":return(0,p.c)(t)-(0,p.c)(e);case"+=":return(0,p.b)(t)||(0,p.b)(e)?(0,p.e)(t)+(0,p.e)(e):(0,p.c)(t)+(0,p.c)(e);case"%=":return(0,p.c)(t)%(0,p.c)(e);default:throw new Error((0,v.H5)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}function H(e,n,t){try{return t>=n.body.length?(0,r.DB)(p.v):(0,r.Ue)(((r,o)=>{D(e,n.body[t]).then((a=>{try{a instanceof p.R||a===p.x||a===p.y||t===n.body.length-1?r(a):H(e,n,t+1).then(r,o)}catch(e){o(e)}}),o)}))}catch(e){return Z(e)}}function _(e,n,t){return(0,r.Ue)(((r,o)=>{t>=n.declarations.length?r(p.v):D(e,n.declarations[t]).then((()=>{t===n.declarations.length-1?r(p.v):_(e,n,t+1).then((()=>{r(p.v)}),o)}),o)}))}let j=0;function V(e,n,t,r){let o;switch(n=n.toLowerCase()){case"hasz":{const n=e.hasZ;return void 0!==n&&n}case"hasm":{const n=e.hasM;return void 0!==n&&n}case"spatialreference":{let n=e.spatialReference._arcadeCacheId;if(void 0===n){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(j++,e.spatialReference._arcadeCacheId=j,n=j)}const t=new g.Z({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==n&&(t._arcadeCacheId="SPREF"+n.toString()),t}}switch(e.type){case"extent":switch(n){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=e[n];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(n){case"rings":return o=e.cache._arcadeCacheId,void 0===o&&(j++,o=j,e.cache._arcadeCacheId=o),new d.Z(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polygon"}break;case"point":switch(n){case"x":case"y":case"z":case"m":return void 0!==e[n]?e[n]:null;case"type":return"Point"}break;case"polyline":switch(n){case"paths":return o=e.cache._arcadeCacheId,void 0===o&&(j++,o=j,e.cache._arcadeCacheId=o),new d.Z(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polyline"}break;case"multipoint":switch(n){case"points":return o=e.cache._arcadeCacheId,void 0===o&&(j++,o=j,e.cache._arcadeCacheId=o),new h.Z(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case"type":return"Multipoint"}}throw new Error((0,v.H5)(r,"RUNTIME","PROPERTYNOTFOUND"))}function Y(e,n){return(0,r.Ue)(((t,r)=>{const o=n.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[o])if(void 0===e.globalScope[o])r(new Error((0,v.H5)(n,"RUNTIME","VARIABLENOTFOUND")));else{const n=e.globalScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=D(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}else{const n=e.localScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=D(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}}))}const G={};function q(e){return null===e?"":(0,p.h)(e)||(0,p.o)(e)?"Array":(0,p.f)(e)?"Date":(0,p.b)(e)?"String":(0,p.i)(e)?"Boolean":(0,p.a)(e)?"Number":e instanceof E.Z?"Attachment":e instanceof w.Z?"Portal":e instanceof g.Z?"Dictionary":e instanceof m.Z?"Feature":e instanceof i.Z?"Point":e instanceof u.Z?"Polygon":e instanceof s.Z?"Polyline":e instanceof l.Z?"Multipoint":e instanceof c.Z?"Extent":(0,p.q)(e)?"Function":(0,p.z)(e)?"FeatureSet":(0,p.A)(e)?"FeatureSetCollection":e===p.v?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function $(e,n,t,o){return(0,r.Ue)(((r,a)=>{D(e,n.arguments[t]).then((i=>{try{if((0,p.n)(i,o))return void D(e,n.arguments[t+1]).then(r,a);{const i=n.arguments.length-t;return 1===i?void D(e,n.arguments[t]).then(r,a):(2===i&&r(null),3===i?void D(e,n.arguments[t+2]).then(r,a):void $(e,n,t+2,o).then(r,a))}}catch(e){a(e)}}),a)}))}function W(e,n,t,o){return(0,r.Ue)(((r,a)=>{!0===o?D(e,n.arguments[t+1]).then(r,a):3==n.arguments.length-t?D(e,n.arguments[t+2]).then(r,a):D(e,n.arguments[t+2]).then((o=>{try{if(!1===(0,p.i)(o))return void a(new Error("WHEN needs boolean test conditions"));W(e,n,t+2,o).then(r,a)}catch(e){a(e)}}))}))}function K(e,n){try{const t=e.length,o=Math.floor(t/2);return 0===t?(0,r.DB)([]):1===t?(0,r.DB)([e[0]]):(0,r.Ue)(((a,i)=>{const c=[K(e.slice(0,o),n),K(e.slice(o,t),n)];(0,r.$6)(c).then((e=>{try{Q(e[0],e[1],n,[]).then(a,i)}catch(e){i(e)}}),i)}))}catch(e){return Z(e)}}function Q(e,n,t,o){return(0,r.Ue)(((r,a)=>{const i=o;e.length>0||n.length>0?e.length>0&&n.length>0?t(e[0],n[0]).then((c=>{try{isNaN(c)&&(c=1),c<=0?(i.push(e[0]),e=e.slice(1)):(i.push(n[0]),n=n.slice(1)),Q(e,n,t,o).then(r,a)}catch(e){a(e)}}),a):e.length>0?(i.push(e[0]),Q(e=e.slice(1),n,t,o).then(r,a)):n.length>0&&(i.push(n[0]),n=n.slice(1),Q(e,n,t,o).then(r,a)):r(o)}))}function X(e,n){const t=e.length,r=Math.floor(t/2);return n||(n=function(e,n){return e<n?-1:e===n?0:1}),0===t?[]:1===t?[e[0]]:function(e,n,t){const r=[];for(;e.length>0||n.length>0;)if(e.length>0&&n.length>0){let o=t(e[0],n[0]);isNaN(o)&&(o=1),o<=0?(r.push(e[0]),e=e.slice(1)):(r.push(n[0]),n=n.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):n.length>0&&(r.push(n[0]),n=n.slice(1));return r}(X(e.slice(0,r),n),X(e.slice(r,t),n),n)}function ee(e,n,t){try{const o=e.body;if(t.length!==e.params.length)return Z(new Error("Invalid Parameter calls to function."));for(let r=0;r<t.length;r++){const o=e.params[r];"Identifier"===o.type&&(n.localScope[o.name.toLowerCase()]={d:null,value:t[r],valueset:!0,node:null})}return D(n,o).then((e=>(0,r.Ue)(((n,t)=>{e instanceof p.R?n(e.value):e!==p.x?e!==p.y?n(e instanceof p.I?e.value:e):t(new Error("Cannot Continue from a Function")):t(new Error("Cannot Break from a Function"))}))))}catch(e){return(0,r.d1)(e)}}function ne(e,n,t){return x(e,n,(function(n,r,o){const a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return ee(t,a,o)}))}function te(e){return function(){const n={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(n.depthCounter>64)throw new Error("Exceeded maximum function depth");return ee(e.definition,n,arguments)}}(0,I.r)(G,F),(0,N.r)(G,F),(0,S.r)(G,F),(0,b.r)(G,F),(0,A.r)(G,F),(0,R.r)(G,F),(0,U.registerFunctions)({functions:G,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:F,standardFunctionAsync:x}),G.typeof=function(e,n){return F(e,n,(function(e,n,t){(0,p.p)(t,1,1);const r=q(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},G.iif=function(e,n){return(0,r.Ue)(((t,o)=>{(0,p.p)(null===n.arguments?[]:n.arguments,3,3),D(e,n.arguments[0]).then((a=>{try{if(!1===(0,p.i)(a))return void o(new Error("IF Function must have a boolean test condition"));(0,r.$6)([D(e,n.arguments[1]),D(e,n.arguments[2])]).then((e=>{t(a?e[0]:e[1])}),o)}catch(e){o(e)}}),o)}))},G.decode=function(e,n){return(0,r.Ue)(((t,r)=>{n.arguments.length<2?r(new Error("Missing Parameters")):2!==n.arguments.length?(n.arguments.length-1)%2!=0?D(e,n.arguments[0]).then((o=>{try{$(e,n,1,o).then(t,r)}catch(e){r(e)}}),r):r(new Error("Must have a default value result.")):D(e,n.arguments[1]).then(t,r)}))},G.when=function(e,n){try{return n.arguments.length<3?Z("Missing Parameters"):n.arguments.length%2==0?Z("Must have a default value result."):D(e,n.arguments[0]).then((t=>(0,r.Ue)(((r,o)=>{!1!==(0,p.i)(t)?W(e,n,0,t).then(r,o):o(new Error("WHEN needs boolean test conditions"))}))))}catch(e){return Z(e)}},G.sort=function(e,n){return x(e,n,(function(e,n,t){(0,p.p)(t,1,2);let o=t[0];if((0,p.o)(o)&&(o=o.toArray()),!1===(0,p.h)(o))return Z(Error("Illegal Argument"));if(t.length>1)return!1===(0,p.q)(t[1])?Z(Error("Illegal Argument")):K(o,te(t[1]));{let e=o;if(0===e.length)return(0,r.DB)([]);const n={};for(let t=0;t<e.length;t++){const r=q(e[t]);""!==r&&(n[r]=!0)}if(!0===n.Array||!0===n.Dictionary||!0===n.Feature||!0===n.Point||!0===n.Polygon||!0===n.Polyline||!0===n.Multipoint||!0===n.Extent||!0===n.Function)return(0,r.DB)(e.slice(0));let t=0,a="";for(const e in n)t++,a=e;return t>1||"String"===a?e=X(e,(function(e,n){if(null==e||e===p.v)return null==n||n===p.v?0:1;if(null==n||n===p.v)return-1;const t=(0,p.e)(e),r=(0,p.e)(n);return t<r?-1:t===r?0:1})):"Number"===a?e=X(e,(function(e,n){return e-n})):"Boolean"===a?e=X(e,(function(e,n){return e===n?0:n?-1:1})):"Date"===a&&(e=X(e,(function(e,n){return n-e}))),(0,r.DB)(e)}}))};const re={failDefferred:Z,resolveDeffered:T,fixSpatialReference:p.r,parseArguments:O,standardFunction:F,standardFunctionAsync:x,evaluateIdentifier:Y,arcadeCustomFunction:te};for(const e in G)G[e]={value:new p.N(G[e]),valueset:!0,node:null};const oe=function(){};function ae(e){console.log(e)}(oe.prototype=G).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},oe.prototype.pi={value:Math.PI,valueset:!0,node:null};const ie=re;function ce(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:F,standardFunctionAsync:x,failDefferred:Z,evaluateIdentifier:Y,arcadeCustomFunctionHandler:te};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)G[e]={value:new p.N(n.functions[e]),valueset:!0,node:null},oe.prototype[e]=G[e];for(let e=0;e<n.signatures.length;e++)(0,v.gW)(n.signatures[e],"async")}function le(e,n){let t=n.spatialReference;null==t&&(t=new o.Z({wkid:102100}));const a=function(e,n){const t=new oe;null==e&&(e={}),null==n&&(n={});const r=new g.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const e in n)t[e]={value:new p.N(n[e]),native:!0,valueset:!0,node:null};for(const n in e)e[n]&&"esri.Graphic"===e[n].declaredClass?t[n]={value:m.Z.createFromGraphic(e[n]),valueset:!0,node:null}:t[n]={value:e[n],valueset:!0,node:null};return t}(n.vars,n.customfunctions);return D({spatialReference:t,services:n.services,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:a,console:n.console?n.console:ae,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:1},e.body[0].body).then((e=>(0,r.Ue)(((n,t)=>{e instanceof p.R&&(e=e.value),e instanceof p.I&&(e=e.value),e===p.v&&(e=null),e!==p.x?e!==p.y?e instanceof p.N||e instanceof f.Z?t(new Error("Cannot return FUNCTION")):n(e):t(new Error("Cannot return CONTINUE")):t(new Error("Cannot return BREAK"))}))))}function ue(e,n){return(0,v.mb)(e)}function se(e,n){return(0,v.FS)(e,n,"full")}function fe(e,n){return(0,v.bV)(e,n)}function he(e,n){return(0,v.w8)(e,n)}function de(e){return(0,v.Vf)(e)}},60175:(e,n,t)=>{"use strict";t.r(n),t.d(n,{registerFunctions:()=>E});var r=t(78927),o=t(49749),a=t(83746),i=t(18735),c=t(10114),l=t(81731),u=t(3414),s=t(58464),f=t(39578),h=t(6924),d=t(73335),p=t(34640);function g(e){return 0===s.i8.indexOf("4.")?c.Z.fromExtent(e):new c.Z({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function w(e){if((0,f.p)(e,2,2),e[0]instanceof r.Z&&e[1]instanceof r.Z);else if(e[0]instanceof r.Z&&null===e[1]);else if(e[1]instanceof r.Z&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function E(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null===t[0]||null===t[1]||(0,p.ED)(t[0],t[1])}))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null!==t[1]&&(0,p.kK)(t[0],t[1])}))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null!==t[1]&&(0,p.W4)(t[0],t[1])}))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null!==t[1]&&(0,p.jU)(t[0],t[1])}))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null!==t[1]&&(0,p.uh)(t[0],t[1])}))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null!==t[1]&&(0,p.r3)(t[0],t[1])}))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null!==t[1]&&(0,p.Nm)(t[0],t[1])}))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return(0,f.p)(t,2,2),t[0]===t[1]||(t[0]instanceof r.Z&&t[1]instanceof r.Z?(0,p.fS)(t[0],t[1]):!(!(0,f.f)(t[0])||!(0,f.f)(t[1]))&&t[0].getTime()===t[1].getTime())}))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,3,3),t[0]instanceof r.Z&&t[1]instanceof r.Z)return(0,p.LV)(t[0],t[1],(0,f.e)(t[2]));if(t[0]instanceof r.Z&&null===t[1])return!1;if(t[1]instanceof r.Z&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null===t[0]||null===t[1]?null:(0,p.wf)(t[0],t[1])}))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){const a=[];if(0===(o=(0,f.J)(o)).length)throw new Error("Function called with wrong number of Parameters");if(1===o.length)if((0,f.h)(o[0])){const e=(0,f.J)(o[0]);for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof r.Z))throw new Error("Illegal Argument");a.push(e[n])}}else{if(!(0,f.o)(o[0])){if(o[0]instanceof r.Z)return(0,f.r)((0,d.r1)(o[0]),n.spatialReference);if(null===o[0])return null;throw new Error("Illegal Argument")}{const e=(0,f.J)(o[0].toArray());for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof r.Z))throw new Error("Illegal Argument");a.push(e[n])}}}else for(let e=0;e<o.length;e++)if(null!==o[e]){if(!(o[e]instanceof r.Z))throw new Error("Illegal Argument");a.push(o[e])}return 0===a.length?null:(0,p.G0)(a)}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null!==t[0]&&null===t[1]?(0,d.r1)(t[0]):null===t[0]?null:(0,p.e5)(t[0],t[1])}))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return w(t=(0,f.J)(t)),null===t[0]&&null===t[1]?null:null===t[0]?(0,d.r1)(t[1]):null===t[1]?(0,d.r1)(t[0]):(0,p.Sp)(t[0],t[1])}))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,2),!(t[1]instanceof a.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return null===t[1]?null:(0,p.oq)(t[0],t[1])}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,2),!(t[1]instanceof l.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return null===t[1]?[(0,d.r1)(t[0])]:(0,p.z7)(t[0],t[1])}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.J)(o))[0])return 0;if((0,f.z)(o[0]))return o[0].sumArea((0,d.EI)((0,f.C)(o[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.h)(o[0])||(0,f.o)(o[0])){const e=(0,f.L)(o[0],n.spatialReference);return null===e?0:(0,p.CJ)(e,(0,d.EI)((0,f.C)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,p.CJ)(o[0],(0,d.EI)((0,f.C)(o[1],-1)))}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.J)(o))[0])return 0;if((0,f.z)(o[0]))return o[0].sumArea((0,d.EI)((0,f.C)(o[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.h)(o[0])||(0,f.o)(o[0])){const e=(0,f.L)(o[0],n.spatialReference);return null===e?0:(0,p.Y4)(e,(0,d.EI)((0,f.C)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,p.Y4)(o[0],(0,d.EI)((0,f.C)(o[1],-1)))}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.J)(o))[0])return 0;if((0,f.z)(o[0]))return o[0].sumLength((0,d.Lz)((0,f.C)(o[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.h)(o[0])||(0,f.o)(o[0])){const e=(0,f.K)(o[0],n.spatialReference);return null===e?0:(0,p.sz)(e,(0,d.Lz)((0,f.C)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,p.sz)(o[0],(0,d.Lz)((0,f.C)(o[1],-1)))}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){if((0,f.p)(o,1,2),null===(o=(0,f.J)(o))[0])return 0;if((0,f.z)(o[0]))return o[0].sumLength((0,d.Lz)((0,f.C)(o[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,f.h)(o[0])||(0,f.o)(o[0])){const e=(0,f.K)(o[0],n.spatialReference);return null===e?0:(0,p.kQ)(e,(0,d.Lz)((0,f.C)(o[1],-1)))}if(!(o[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,p.kQ)(o[0],(0,d.Lz)((0,f.C)(o[1],-1)))}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,o){o=(0,f.J)(o),(0,f.p)(o,2,3);let a=o[0];((0,f.h)(o[0])||(0,f.o)(o[0]))&&(a=(0,f.O)(o[0],n.spatialReference));let i=o[1];if(((0,f.h)(o[1])||(0,f.o)(o[1]))&&(i=(0,f.O)(o[1],n.spatialReference)),!(a instanceof r.Z))throw new Error("Illegal Argument");if(!(i instanceof r.Z))throw new Error("Illegal Argument");return(0,p.TE)(a,i,(0,d.Lz)((0,f.C)(o[2],-1)))}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,f.J)(t),(0,f.p)(t,2,3);const r=t[0],a=t[1];if(!(r instanceof o.Z))throw new Error("Illegal Argument");if(!(a instanceof o.Z))throw new Error("Illegal Argument");const i=new l.Z({paths:[],spatialReference:r.spatialReference});return i.addPath([r,a]),(0,p.kQ)(i,(0,d.Lz)((0,f.C)(t[2],-1)))}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.c)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");if(o<=0)throw new Error("Illegal Argument");return t[0]instanceof c.Z||t[0]instanceof l.Z?(0,p.Cz)(t[0],o,(0,d.Lz)((0,f.C)(t[2],-1))):t[0]instanceof a.Z?(0,p.Cz)(g(t[0]),o,(0,d.Lz)((0,f.C)(t[2],-1))):t[0]}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.c)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");if(o<=0)throw new Error("Illegal Argument");return t[0]instanceof c.Z||t[0]instanceof l.Z?(0,p.j2)(t[0],o,(0,d.Lz)((0,f.C)(t[2],-1))):t[0]instanceof a.Z?(0,p.j2)(g(t[0]),o,(0,d.Lz)((0,f.C)(t[2],-1))):t[0]}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,4),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.c)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");return(0,p.D$)(t[0],o,(0,f.d)((0,f.C)(t[2],!0)),(0,d.Lz)((0,f.C)(t[3],-1)))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.c)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?(0,d.r1)(t[0]):(0,p.f3)(t[0],o,(0,d.Lz)((0,f.C)(t[2],-1)))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");const o=(0,f.c)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?(0,d.r1)(t[0]):(0,p.rd)(t[0],o,(0,d.Lz)((0,f.C)(t[2],-1)))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,2,6),null===t[0])return null;if(!(t[0]instanceof c.Z||t[0]instanceof l.Z))throw new Error("Illegal Argument");const r=(0,f.c)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");const o=(0,f.c)((0,f.C)(t[4],10));if(isNaN(o))throw new Error("Illegal Argument");const a=(0,f.c)((0,f.C)(t[5],0));if(isNaN(a))throw new Error("Illegal Argument");return(0,p.cv)(t[0],r,(0,d.Lz)((0,f.C)(t[2],-1)),(0,f.e)((0,f.C)(t[3],"round")).toLowerCase(),o,a)}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,f.J)(t),(0,f.p)(t,2,3);let i=t[0];if(null===i)return null;if(!(i instanceof r.Z))throw new Error("Illegal Argument");i instanceof a.Z&&(i=c.Z.fromExtent(i));const l=(0,f.c)(t[1]);if(isNaN(l))throw new Error("Illegal Argument");const u=(0,f.C)(t[2],null);if(null===u)return(0,p.U1)(i,l);if(u instanceof o.Z)return(0,p.U1)(i,l,u);throw new Error("Illegal Argument")}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,u){if(u=(0,f.J)(u),(0,f.p)(u,1,1),null===u[0])return null;let s=u[0];if(((0,f.h)(u[0])||(0,f.o)(u[0]))&&(s=(0,f.O)(u[0],n.spatialReference)),null===s)return null;if(!(s instanceof r.Z))throw new Error("Illegal Argument");return s instanceof o.Z?(0,f.r)((0,d.r1)(u[0]),n.spatialReference):s instanceof c.Z?s.centroid:s instanceof l.Z?(0,h.s9)(s):s instanceof i.Z?(0,h.Ay)(s):s instanceof a.Z?s.center:null}))},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,s){s=(0,f.J)(s),(0,f.p)(s,1,1);const h=[];if(null===s[0])return null;if(!(s[0]instanceof r.Z))throw new Error("Illegal Argument");return s[0]instanceof o.Z||s[0]instanceof a.Z?[(0,f.r)((0,d.r1)(s[0]),n.spatialReference)]:(0,p.og)(s[0]).then((e=>{if(e instanceof c.Z){const n=[],t=[];for(let r=0;r<e.rings.length;r++)if(e.isClockwise(e.rings[r])){const t=(0,u.im)({rings:[e.rings[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(t)}else t.push({ring:e.rings[r],pt:e.getPoint(r,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(e instanceof l.Z){const n=[];for(let t=0;t<e.paths.length;t++){const r=(0,u.im)({paths:[e.paths[t]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(r)}return n}if(s[0]instanceof i.Z){const e=(0,f.r)((0,d.r1)(s[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)h.push(e.getPoint(n));return h}return null}))}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,1,1),null===t[0])return!0;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,p.Gg)(t[0])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,f.J)(t),(0,f.p)(t,1,1),null===t[0])return null;if(!(t[0]instanceof r.Z))throw new Error("Illegal Argument");return(0,p.og)(t[0])}))})}},34640:(e,n,t)=>{"use strict";t.d(n,{f3:()=>Z,oq:()=>s,r3:()=>h,jU:()=>d,z7:()=>f,Cz:()=>x,e5:()=>b,ED:()=>m,TE:()=>p,fS:()=>g,D$:()=>F,Y4:()=>k,rd:()=>T,j2:()=>D,kQ:()=>P,wf:()=>S,kK:()=>w,Gg:()=>N,cv:()=>C,Nm:()=>v,CJ:()=>L,sz:()=>M,LV:()=>I,U1:()=>O,og:()=>A,Sp:()=>R,W4:()=>E,G0:()=>U,uh:()=>y}),t(49749);var r=t(3414),o=(t(36458),t(40776));function a(e){var n;return Array.isArray(e)?null==(n=e[0])?void 0:n.spatialReference:null==e?void 0:e.spatialReference}function i(e){return e?Array.isArray(e)?e.map(i):e.toJSON?e.toJSON():e:e}function c(e){return Array.isArray(e)?e.map((e=>(0,r.im)(e))):(0,r.im)(e)}let l;async function u(e,n){return(await async function(){return l||(l=(0,o.bA)("geometryEngineWorker",{strategy:"distributed"})),l}()).invoke("executeGEOperation",{operation:e,parameters:i(n)})}async function s(e,n){return c(await u("clip",[a(e),e,n]))}async function f(e,n){return c(await u("cut",[a(e),e,n]))}function h(e,n){return u("contains",[a(e),e,n])}function d(e,n){return u("crosses",[a(e),e,n])}function p(e,n,t){return u("distance",[a(e),e,n,t])}function g(e,n){return u("equals",[a(e),e,n])}function w(e,n){return u("intersects",[a(e),e,n])}function E(e,n){return u("touches",[a(e),e,n])}function y(e,n){return u("within",[a(e),e,n])}function m(e,n){return u("disjoint",[a(e),e,n])}function v(e,n){return u("overlaps",[a(e),e,n])}function I(e,n,t){return u("relate",[a(e),e,n,t])}function N(e){return u("isSimple",[a(e),e])}async function A(e){return c(await u("simplify",[a(e),e]))}async function b(e,n){return c(await u("difference",[a(e),e,n]))}async function R(e,n){return c(await u("symmetricDifference",[a(e),e,n]))}async function S(e,n){return c(await u("intersect",[a(e),e,n]))}async function U(e,n=null){const t=function(e,n){let t;return Array.isArray(e)?t=e:(t=[],t.push(e),null!=n&&t.push(n)),t}(e,n);return c(await u("union",[a(t),t]))}async function C(e,n,t,r,o,i){return c(await u("offset",[a(e),e,n,t,r,o,i]))}async function Z(e,n,t,r=!1){const o=[a(e),e,n,t,r];return c(await u("buffer",o))}async function T(e,n,t,r,o,i){const l=[a(e),e,n,t,r,o,i];return c(await u("geodesicBuffer",l))}async function O(e,n,t){var r;if(null==e)throw new Error("Illegal Argument Exception");const o=e.spatialReference;t=null!=(r=t)?r:function(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}(e);const a=e.constructor.fromJSON(await u("rotate",[o,e,n,t]));return a.spatialReference=o,a}async function F(e,n,t,r){return c(await u("generalize",[a(e),e,n,t,r]))}async function x(e,n,t){return c(await u("densify",[a(e),e,n,t]))}async function D(e,n,t,r=0){return c(await u("geodesicDensify",[a(e),e,n,t,r]))}function L(e,n){return u("planarArea",[a(e),e,n])}function M(e,n){return u("planarLength",[a(e),e,n])}function k(e,n,t){return u("geodesicArea",[a(e),e,n,t])}function P(e,n,t){return u("geodesicLength",[a(e),e,n,t])}}}]);