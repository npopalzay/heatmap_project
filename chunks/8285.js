(self.webpackChunkgeog863_final=self.webpackChunkgeog863_final||[]).push([[8285],{30151:(e,r,t)=>{"use strict";t.d(r,{E:()=>o});class s{constructor(e={}){this._options=e}toQueryParams(e){if(!e)return null;const r=e.toJSON(),t={};return Object.keys(r).forEach((e=>{const s=this._options[e];if(s){const o="boolean"!=typeof s&&s.name?s.name:e,a="boolean"!=typeof s&&s.getter?s.getter(r):r[e];null!=a&&(t[o]=(e=>{if(!Array.isArray(e))return!1;const[r]=e;return"number"==typeof r||"string"==typeof r})(a)?a.join(","):"object"==typeof a?JSON.stringify(a):a)}else t[e]=r[e]}),this),t}}function o(e){return new s(e)}},17933:(e,r,t)=>{"use strict";t.d(r,{et:()=>M,ef:()=>w,bI:()=>S,mT:()=>B,Wf:()=>C});var s=t(65393),o=t(18029),a=t(29107),i=t(65869),n=t(12377),l=t(87397),p=(t(1867),t(9783),t(9385),t(82203)),u=t(23757),c=t(65482),d=(t(17593),t(15392),t(11786),t(49886)),f=t(67794),y=t(60042),v=t(71675),h=t(7358);let g=class extends d.wq{constructor(e){super(e),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};(0,l._)([(0,p.Cb)({type:h.Z,json:{write:!0}})],g.prototype,"directions",void 0),(0,l._)([(0,p.Cb)({type:f.Z,json:{write:!0}})],g.prototype,"route",void 0),(0,l._)([(0,p.Cb)({type:String,json:{write:!0}})],g.prototype,"routeName",void 0),(0,l._)([(0,p.Cb)({type:[f.Z],json:{write:!0}})],g.prototype,"stops",void 0),g=(0,l._)([(0,c.j)("esri.tasks.support.RouteResult")],g);const m=g;function T(e){return e&&y.default.fromJSON(e).features.map((e=>e))}let b=class extends d.wq{constructor(e){super(e),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,r){return T(r.barriers||r.pointBarriers)}readPolylineBarriers(e){return T(e)}readPolygonBarriers(e){return T(e)}};(0,l._)([(0,p.Cb)({aliasOf:"pointBarriers"})],b.prototype,"barriers",void 0),(0,l._)([(0,p.Cb)({type:[v.Z]})],b.prototype,"messages",void 0),(0,l._)([(0,p.Cb)({type:[f.Z]})],b.prototype,"pointBarriers",void 0),(0,l._)([(0,u.r)("pointBarriers",["barriers","pointBarriers"])],b.prototype,"readPointBarriers",null),(0,l._)([(0,p.Cb)({type:[f.Z]})],b.prototype,"polylineBarriers",void 0),(0,l._)([(0,u.r)("polylineBarriers")],b.prototype,"readPolylineBarriers",null),(0,l._)([(0,p.Cb)({type:[f.Z]})],b.prototype,"polygonBarriers",void 0),(0,l._)([(0,u.r)("polygonBarriers")],b.prototype,"readPolygonBarriers",null),(0,l._)([(0,p.Cb)({type:[m]})],b.prototype,"routeResults",void 0),b=(0,l._)([(0,c.j)("esri.tasks.support.RouteResultsContainer")],b);const _=b;function M(e,r,t,s){s[t]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}function w(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function B(e){const r=[],t=[],{directions:s=[],routes:{features:o=[],spatialReference:a=null}={},stops:{features:i=[],spatialReference:n=null}={},barriers:l,polygonBarriers:p,polylineBarriers:u,messages:c}=e.data,d="esri.tasks.RouteTask.NULL_ROUTE_NAME";let f,y,v=!0;const h=o&&a||i&&n||l&&l.spatialReference||p&&p.spatialReference||u&&u.spatialReference;s.forEach((e=>{r.push(f=e.routeName),t[f]={directions:e}})),o.forEach((e=>{-1===r.indexOf(f=e.attributes.Name)&&(r.push(f),t[f]={}),e.geometry&&(e.geometry.spatialReference=h),t[f].route=e})),i.forEach((e=>{y=e.attributes,-1===r.indexOf(f=y.RouteName||d)&&(r.push(f),t[f]={}),f!==d&&(v=!1),e.geometry&&(e.geometry.spatialReference=h),null==t[f].stops&&(t[f].stops=[]),t[f].stops.push(e)})),i.length>0&&!0===v&&(t[r[0]].stops=t[d].stops,delete t[d],r.splice(r.indexOf(d),1));const g=r.map((e=>(t[e].routeName=e===d?null:e,t[e])));return _.fromJSON({routeResults:g,pointBarriers:l,polygonBarriers:p,polylineBarriers:u,messages:c})}function C(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)if((0,o.pC)(e)&&e.hasZ)return!0}return!1}async function S(e){if(!e)throw new a.Z("network-service:missing-url","Url to Network service is missing");const{data:r}=await(0,i.default)(e,{query:{f:"json"}});r.supportedTravelModes||(r.supportedTravelModes=[]);for(let e=0;e<r.supportedTravelModes.length;e++)r.supportedTravelModes[e].id||(r.supportedTravelModes[e].id=r.supportedTravelModes[e].itemId);const t=r.currentVersion>=10.4?async function(e){try{const{data:{supportedTravelModes:r,defaultTravelMode:t}}=await(0,i.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});return{supportedTravelModes:r,defaultTravelMode:t}}catch(e){throw new a.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e})}}(e):async function(e){const{data:r}=await(0,i.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json"}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=r.owningSystemUrl;const{data:t}=await(0,i.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}}),o=(0,s.hS)("helperServices.routingUtilities.url",t);if(!o)return{supportedTravelModes:[],defaultTravelMode:null};const a=(0,n.en)(e),l=/\/solve$/.test(a.path)?"Route":/\/solveClosestFacility$/.test(a.path)?"ClosestFacility":"ServiceAreas",p=await(0,i.default)(o+("/"===o[o.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:l}}),u=[];let c=null;if(p&&p.data&&p.data.results&&p.data.results.length){const e=p.data.results;for(const r of e)if("supportedTravelModes"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);u.push(r)}}else"defaultTravelMode"===r.paramName&&(c=r.value)}return{supportedTravelModes:u,defaultTravelMode:c}}(e),{defaultTravelMode:o,supportedTravelModes:l}=await t;return r.defaultTravelMode=o,r.supportedTravelModes=l,r}},98285:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>N});var s=t(87397),o=(t(1867),t(9783),t(9385),t(82203)),a=t(65482),i=(t(17593),t(15392),t(11786),t(23889)),n=t(65869),l=t(42176),p=t(12377),u=t(30151),c=t(17933),d=t(18029),f=t(23757),y=t(49886),v=t(12031),h=t(49749),g=t(10114),m=t(81731),T=t(3414),b=(t(36458),t(67794)),_=t(71675);function M(e){return e.features.map((r=>{const t=v.Z.fromJSON(e.spatialReference),s=b.Z.fromJSON(r);return(0,d.Wg)(s.geometry).spatialReference=t,s}))}function w(e){return e.features.map((r=>(r.geometry.spatialReference=e.spatialReference,(0,T.im)(r.geometry))))}let B=class extends y.wq{constructor(e){super(e),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(e){return w(e)}readPointBarriers(e,r){return w(r.barriers)}readPolylineBarriers(e){return w(e)}readPolygonBarriers(e){return w(e)}readIncidents(e,r){return M(r.saPolylines)}readServiceAreaPolygons(e,r){return M(r.saPolygons)}};(0,s._)([(0,o.Cb)({type:[h.Z]})],B.prototype,"facilities",void 0),(0,s._)([(0,f.r)("facilities")],B.prototype,"readFacilities",null),(0,s._)([(0,o.Cb)({type:[_.Z]})],B.prototype,"messages",void 0),(0,s._)([(0,o.Cb)({type:[h.Z]})],B.prototype,"pointBarriers",void 0),(0,s._)([(0,f.r)("pointBarriers",["barriers"])],B.prototype,"readPointBarriers",null),(0,s._)([(0,o.Cb)({type:[m.Z]})],B.prototype,"polylineBarriers",void 0),(0,s._)([(0,f.r)("polylineBarriers")],B.prototype,"readPolylineBarriers",null),(0,s._)([(0,o.Cb)({type:[g.Z]})],B.prototype,"polygonBarriers",void 0),(0,s._)([(0,f.r)("polygonBarriers")],B.prototype,"readPolygonBarriers",null),(0,s._)([(0,o.Cb)({type:[b.Z]})],B.prototype,"serviceAreaPolylines",void 0),(0,s._)([(0,f.r)("serviceAreaPolylines",["saPolylines"])],B.prototype,"readIncidents",null),(0,s._)([(0,o.Cb)({type:[b.Z]})],B.prototype,"serviceAreaPolygons",void 0),(0,s._)([(0,f.r)("serviceAreaPolygons",["saPolygons"])],B.prototype,"readServiceAreaPolygons",null),B=(0,s._)([(0,a.j)("esri.tasks.support.ServiceAreaSolveResult")],B);const C=B,S=(0,u.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});var Z=t(27062);let P=class extends((0,Z.Y)(i.Z)){constructor(e){super(e),this.url=null}solve(e,r){return async function(e,r,t){const s=[],o=[],a={},i={},u=(0,p.en)(e);return r.facilities&&r.facilities.features&&(0,c.et)(r.facilities.features,o,"facilities.features",a),r.pointBarriers&&r.pointBarriers.features&&(0,c.et)(r.pointBarriers.features,o,"pointBarriers.features",a),r.polylineBarriers&&r.polylineBarriers.features&&(0,c.et)(r.polylineBarriers.features,o,"polylineBarriers.features",a),r.polygonBarriers&&r.polygonBarriers.features&&(0,c.et)(r.polygonBarriers.features,o,"polygonBarriers.features",a),(0,l.aX)(o).then((e=>{for(const r in a){const t=a[r];s.push(r),i[r]=e.slice(t[0],t[1])}return(0,c.Wf)(i,s)?(0,c.bI)(u.path).catch((()=>({dontCheck:!0}))):Promise.resolve({dontCheck:!0})})).then((e=>{("dontCheck"in e?e.dontCheck:e.hasZ)||(0,c.ef)(i,s);for(const e in i)i[e].forEach(((t,s)=>{r.get(e)[s].geometry=t}));let o={query:{...u.query,f:"json",...S.toQueryParams(r)}};return t&&(o={...t,...o}),(0,n.default)(`${u.path}/solveServiceArea`,o)})).then((e=>C.fromJSON(e.data)))}(this.url,e,r)}};(0,s._)([(0,o.Cb)()],P.prototype,"url",void 0),P=(0,s._)([(0,a.j)("esri.tasks.ServiceAreaTask")],P);const N=P},27062:(e,r,t)=>{"use strict";t.d(r,{Y:()=>c});var s=t(87397),o=(t(1867),t(65393)),a=t(18029),i=(t(9783),t(9385),t(82203),t(65482)),n=t(29107),l=t(17593),p=(t(15392),t(11786),t(65869)),u=t(23889);const c=e=>{let r=class extends e{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new n.Z("network-service:missing-url","Url to Network service is missing");const r=this.url,{data:t}=await(0,p.default)(r,{query:{f:"json",token:e}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let e=0;e<t.supportedTravelModes.length;e++)t.supportedTravelModes[e].id||(t.supportedTravelModes[e].id=t.supportedTravelModes[e].itemId);const s=t.currentVersion>=10.4?async function(e,r){try{const{data:{supportedTravelModes:t,defaultTravelMode:s}}=await(0,p.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json",token:r}});return{supportedTravelModes:t,defaultTravelMode:s}}catch(e){throw new n.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e})}}(r,e):async function(e,r){const{data:t}=await(0,p.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json",token:r}});if(!t||!t.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=t.owningSystemUrl;const{data:s}=await(0,p.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json",token:r}}),a=(0,o.hS)("helperServices.routingUtilities.url",s);if(!a)return{supportedTravelModes:[],defaultTravelMode:null};const i=(0,l.mN)(e),n=/\/solveClosestFacility$/.test(i.path)?"Route":/\/solveClosestFacility$/.test(i.path)?"ClosestFacility":"ServiceAreas",u=await(0,p.default)(a+("/"===a[a.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:n,token:r}}),c=[];let d=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const r of e)if("supportedTravelModes"===r.paramName){if(r.value&&r.value.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);c.push(r)}}else"defaultTravelMode"===r.paramName&&(d=r.value)}return{supportedTravelModes:c,defaultTravelMode:d}}(r,e),{defaultTravelMode:a,supportedTravelModes:i}=await s;return t.defaultTravelMode=a,t.supportedTravelModes=i,t}_isInputGeometryZAware(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)if((0,a.pC)(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,r){for(let t=0;t<r.length;t++){const s=e[r[t]];if(s&&s.length)for(const e of s)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}};return r=(0,s._)([(0,i.j)("esri.tasks.mixins.NAServiceDescription")],r),r};let d=class extends(c(u.Z)){};d=(0,s._)([(0,i.j)("esri.tasks.mixins.NAServiceDescription")],d)},7358:(e,r,t)=>{"use strict";t.d(r,{Z:()=>v});var s=t(87397),o=(t(1867),t(18029)),a=(t(9783),t(9385),t(82203)),i=t(23757),n=t(65482),l=(t(17593),t(15392),t(11786),t(12031)),p=t(49749),u=t(83746),c=t(81731),d=(t(36458),t(67794)),f=t(60042);let y=class extends f.default{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){(e||[]).forEach((e=>{this._decompressFeatureGeometry(e,r.summary.envelope.spatialReference)}));const t=l.Z.fromJSON(r.spatialReference);return e.map((e=>{const r=d.Z.fromJSON(e),s=e.geometry&&e.geometry.spatialReference;return r.geometry&&!s&&((0,o.Wg)(r.geometry).spatialReference=t),r.strings=e.strings,r.events=(e.events||[]).map((r=>{const t=new d.Z({geometry:new p.Z({x:r.point.x,y:r.point.y,z:r.point.z,hasZ:void 0!==r.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:r.ETA,arriveTimeUTC:r.arriveTimeUTC}});return t.strings=r.strings,t})),r}))}get mergedGeometry(){if(!this.features)return null;const e=this.features.map((({geometry:e})=>(0,o.Wg)(e))),r=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,r)}get strings(){return this.features.map((({strings:e})=>e))}_decompressFeatureGeometry(e,r){e.geometry=this._decompressGeometry(e.compressedGeometry,r)}_decompressGeometry(e,r){let t=0,s=0,o=0,a=0;const i=[];let n,l,p,u,c,d,f,y,v=0,h=0,g=0;if(c=e.match(/((\+|\-)[^\+\-\|]+|\|)/g),c||(c=[]),0===parseInt(c[v],32)){v=2;const e=parseInt(c[v],32);v++,d=parseInt(c[v],32),v++,1&e&&(h=c.indexOf("|")+1,f=parseInt(c[h],32),h++),2&e&&(g=c.indexOf("|",h)+1,y=parseInt(c[g],32),g++)}else d=parseInt(c[v],32),v++;for(;v<c.length&&"|"!==c[v];){n=parseInt(c[v],32)+t,v++,t=n,l=parseInt(c[v],32)+s,v++,s=l;const e=[n/d,l/d];h&&(u=parseInt(c[h],32)+o,h++,o=u,e.push(u/f)),g&&(p=parseInt(c[g],32)+a,g++,a=p,e.push(p/y)),i.push(e)}return{paths:[i],hasZ:h>0,hasM:g>0,spatialReference:r}}_mergePolylinesToSinglePath(e,r){let t=[];(e||[]).forEach((e=>{e.paths.forEach((e=>{t=t.concat(e)}))}));const s=[];let o=[0,0];return t.forEach((e=>{e[0]===o[0]&&e[1]===o[1]||(s.push(e),o=e)})),new c.Z({paths:[s]},r)}};(0,s._)([(0,a.Cb)({type:u.Z,json:{read:{source:"summary.envelope"}}})],y.prototype,"extent",void 0),(0,s._)([(0,a.Cb)()],y.prototype,"features",void 0),(0,s._)([(0,i.r)("features")],y.prototype,"readFeatures",null),(0,s._)([(0,a.Cb)()],y.prototype,"geometryType",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"mergedGeometry",null),(0,s._)([(0,a.Cb)()],y.prototype,"routeId",void 0),(0,s._)([(0,a.Cb)()],y.prototype,"routeName",void 0),(0,s._)([(0,a.Cb)({value:null,readOnly:!0})],y.prototype,"strings",null),(0,s._)([(0,a.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],y.prototype,"totalDriveTime",void 0),(0,s._)([(0,a.Cb)({json:{read:{source:"summary.totalLength"}}})],y.prototype,"totalLength",void 0),(0,s._)([(0,a.Cb)({json:{read:{source:"summary.totalTime"}}})],y.prototype,"totalTime",void 0),y=(0,s._)([(0,n.j)("esri.tasks.support.DirectionsFeatureSet")],y);const v=y},53557:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var s=t(87397),o=(t(1867),t(9783),t(9385),t(82203)),a=t(73471),i=t(65482),n=(t(17593),t(15392),t(11786),t(49886));const l=new a.Xn({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let p=class extends n.wq{constructor(e){super(e),this.description=null,this.type=null}};(0,s._)([(0,o.Cb)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,s._)([(0,o.Cb)({type:String,json:{read:l.read,write:l.write}})],p.prototype,"type",void 0),p=(0,s._)([(0,i.j)("esri.tasks.support.GPMessage")],p);const u=p},71675:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var s=t(87397),o=(t(1867),t(9783),t(9385),t(82203)),a=t(73471),i=t(65482),n=(t(17593),t(15392),t(11786),t(53557));const l=new a.Xn({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let p=class extends n.Z{constructor(e){super(e),this.type=null}};(0,s._)([(0,o.Cb)({type:String,json:{read:l.read,write:l.write}})],p.prototype,"type",void 0),p=(0,s._)([(0,i.j)("esri.tasks.support.NAMessage")],p);const u=p}}]);