import{r as t,c as s,h as i,H as h,g as e}from"./p-f8f51224.js";import{S as r}from"./p-b5f138bd.js";const a=class{constructor(e){t(this,e),this.calciteListOrderChange=s(this,"calciteListOrderChange",7),this.handleSelector="calcite-handle",this.disabled=!1,this.loading=!1,this.handleActivated=!1,this.items=[],this.observer=new MutationObserver((()=>{this.cleanUpDragAndDrop(),this.items=Array.from(this.el.children),this.setUpDragAndDrop()}))}connectedCallback(){this.items=Array.from(this.el.children),this.setUpDragAndDrop(),this.beginObserving()}disconnectedCallback(){this.observer.disconnect(),this.cleanUpDragAndDrop()}calciteHandleNudgeHandler(e){const t=this.items.find((t=>t.contains(e.detail.handle)||e.composedPath().includes(t))),s=this.items.length-1,i=this.items.indexOf(t);let r,n=!1;switch(e.detail.direction){case"up":e.preventDefault(),0===i?n=!0:r=i-1;break;case"down":e.preventDefault(),i===s?r=0:i===s-1?n=!0:r=i+2;break;default:return}this.observer.disconnect(),n?t.parentElement.appendChild(t):t.parentElement.insertBefore(t,this.items[r]),this.items=Array.from(this.el.children),e.detail.handle.activated=!0,e.detail.handle.setFocus(),this.beginObserving()}setUpDragAndDrop(){this.sortable=r.create(this.el,{handle:this.handleSelector,onUpdate:()=>{this.items=Array.from(this.el.children),this.calciteListOrderChange.emit()},onStart:()=>{this.observer.disconnect()},onEnd:()=>{this.beginObserving()}})}cleanUpDragAndDrop(){this.sortable.destroy(),this.sortable=null}beginObserving(){this.observer.observe(this.el,{childList:!0,subtree:!0})}render(){return i(h,null,i("slot",null))}get el(){return e(this)}};export{a as calcite_sortable_list};